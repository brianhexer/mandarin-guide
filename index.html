<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mandarin Guide</title>

    <!-- PWA Settings -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icon-192.png"> <!-- Added for iOS -->
    <meta name="theme-color" content="#ffffff"/> <!-- Added theme color -->
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root {
            /* REMOVED: --sidebar-width: 280px; */
            --header-height: 64px;
            /* Modern Color Palette */
            --bg-primary: #ffffff;
            --bg-secondary: #f8fafc; /* slate-50 */
            /* REMOVED: --bg-sidebar: #f8fafc; */
            --text-primary: #1e293b; /* slate-800 */
            --text-secondary: #64748b; /* slate-500 */
            --text-heading: #0f172a; /* slate-900 */
            --border-color: #e2e8f0; /* slate-200 */
            --accent-color: #3b82f6; /* blue-500 */
            --accent-text-color: #2563eb; /* blue-600 */
            --hover-bg-color: #f1f5f9; /* slate-100 */
            --card-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); /* shadow-md */
            --completed-color: #16a34a; /* green-600 */
            --completed-bg: #f0fdf4; /* green-50 */
        }
        
        html {
            scroll-behavior: smooth;
        }
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #f0f9ff 0%, #f8fafc 100%);
            color: var(--text-primary);
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
        }
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        
        /* --- Modernized Styles --- */

        /* REMOVED: All .sidebar, .sidebar a, .sidebar-heading styles */

        .card {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            overflow: hidden;
        }
        .card-title {
            color: var(--text-heading);
        }
        .text-muted {
            color: var(--text-secondary);
        }

        .header {
            background-color: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid var(--border-color);
        }
        .accent-text {
            color: var(--accent-text-color);
        }

        .listen-btn {
            background-color: var(--hover-bg-color);
            color: var(--text-secondary);
            border: none;
            border-radius: 6px;
            transition: background-color 0.2s, color 0.2s, transform 0.1s;
        }
        .listen-btn:hover {
            background-color: #eff6ff; /* blue-50 */
            color: #2563eb; /* blue-600 */
        }
         .listen-btn:active {
             transform: scale(0.95);
             background-color: #f0fdf4; /* green-50 */
             color: #16a34a; /* green-600 */
         }

        .pinyin {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--hover-bg-color);
            color: #475569; /* slate-600 */
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 0.9em;
            border: 1px solid var(--border-color);
        }
        .hanzi {
            font-size: 1.15em;
            font-weight: 500;
            overflow-wrap: break-word; /* NEW: Allow long Chinese text to wrap */
            word-break: break-word; /* Fallback for overflow-wrap */
        }

        .callout {
            background-color: #f0f9ff; /* sky-50 */
            border-left: 4px solid var(--accent-color);
            color: #0c4a6e; /* sky-800 */
            border-radius: 6px;
        }
        .callout .pinyin {
            background-color: #e0f2fe; /* sky-100 */
            color: #075985; /* sky-900 */
            border-color: #bae6fd; /* sky-200 */
        }

        .table {
            border-collapse: separate;
            border-spacing: 0;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            width: 100%;
        }
        .table th {
            background-color: var(--bg-secondary);
            color: var(--text-heading);
            font-weight: 600;
        }
        .table td, .table th {
            border: none;
            border-bottom: 1px solid var(--border-color);
            padding: 12px 16px;
        }
        .table tbody tr:last-child td {
            border-bottom: none;
        }
        .table tbody tr:hover {
            background-color: var(--hover-bg-color);
        }

        /* REMOVED: .menu-btn styles */
        /* REMOVED: #sidebar-overlay styles */
        /* REMOVED: #sidebar-container styles */
        
        /* Main content padding */
        .main-content {
            padding-top: var(--header-height);
            /* REMOVED: padding-left */
        }

        /* REMOVED: Desktop layout media query for sidebar */

        /* --- NEW STYLES FOR PAGINATION & PROGRESS --- */
        .content-page {
            display: none;
        }
        .content-page.active {
            display: block;
        }

        /* REMOVED: Progress Icons in Sidebar */
        
        /* Page Navigation Buttons */
        .page-footer-nav {
            display: flex;
            flex-direction: column; /* MOBILE-FIRST: Stack button groups */
            gap: 1rem; /* Space between button groups */
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border-color);
        }
        .page-footer-nav > div { /* Target the immediate children divs */
            display: grid; /* Make buttons stack */
            grid-template-columns: 1fr;
            gap: 0.75rem;
        }

        @media (min-width: 640px) { /* sm breakpoint */
            .page-footer-nav {
                flex-direction: row;
                justify-content: space-between;
                align-items: center;
            }
            .page-footer-nav > div {
                display: flex; /* Go back to flex */
                flex-direction: row;
                grid-template-columns: none; /* Reset grid */
            }
        }

        .mark-complete-btn, .next-page-btn, .prev-page-btn, .home-page-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.625rem 1rem;
            font-size: 0.875rem;
            font-weight: 500;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.2s;
        }
        .mark-complete-btn:hover, .next-page-btn:hover, .prev-page-btn:hover {
            background-color: var(--hover-bg-color);
            border-color: #cbd5e1; /* slate-300 */
        }
        .mark-complete-btn.is-completed {
            background-color: var(--completed-bg);
            border-color: #bbf7d0; /* green-200 */
            color: var(--completed-color);
        }
        .next-page-btn {
            background-color: #16a34a; /* green-600 */
            border-color: #16a34a; /* green-600 */
            color: white;
        }
        .next-page-btn:hover {
            background-color: #15803d; /* green-700 */
            border-color: #15803d; /* green-700 */
            color: white;
        }
        .prev-page-btn {
            border-color: #dc2626; /* red-600 */
            color: #dc2626; /* red-600 */
        }
        .prev-page-btn:hover {
            background-color: #fef2f2; /* red-50 */
            border-color: #b91c1c; /* red-700 */
            color: #b91c1c; /* red-700 */
        }
        .home-page-btn {
            border-color: #3b82f6; /* blue-500 */
            color: #3b82f6; /* blue-500 */
        }
        .home-page-btn:hover {
            background-color: #eff6ff; /* blue-50 */
            border-color: #2563eb; /* blue-600 */
            color: #2563eb; /* blue-600 */
        }

        /* MODAL STYLES (Unchanged) */
        #next-lesson-modal {
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
        }
        #next-lesson-modal[aria-hidden="true"] {
            opacity: 0;
            visibility: hidden;
        }
        #next-lesson-modal[aria-hidden="false"] {
            opacity: 1;
            visibility: visible;
        }
        #next-lesson-modal[aria-hidden="false"] #modal-overlay {
            opacity: 1;
        }
        #next-lesson-modal[aria-hidden="false"] > div:last-child {
            transform: scale(1);
            opacity: 1;
        }

        #modal-overlay {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #next-lesson-modal > div:last-child {
            opacity: 0;
            transform: scale(0.95);
            transition: all 0.2s ease-in-out;
        }
        
        /* --- NEW: Home Page Navigation Styles --- */
        .nav-dropdown summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background-color: var(--bg-secondary);
            padding: 0.75rem 1.25rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s, color 0.2s;
            font-weight: 600;
            color: var(--text-heading);
        }
        .nav-dropdown summary:hover {
            background-color: #eff6ff; /* blue-50 */
            border-color: #bfdbfe; /* blue-200 */
            color: var(--accent-text-color); /* blue-600 */
        }
        .nav-dropdown summary::after { /* Dropdown arrow */
            content: '▼';
            font-size: 0.7em;
            color: var(--text-secondary);
            transition: transform 0.2s;
        }
        .nav-dropdown[open] summary::after {
            transform: rotate(180deg);
        }
        .nav-dropdown-content {
            padding: 0.5rem;
            border: 1px solid var(--border-color);
            border-top: none;
            border-radius: 0 0 8px 8px;
            margin-top: -8px; /* Pull up to meet summary */
            background-color: var(--bg-primary);
        }
        
        .nav-link {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.6rem 1rem;
            font-size: 0.9rem;
            color: var(--text-secondary);
            border-radius: 6px;
            text-decoration: none;
            transition: background-color 0.2s, color 0.2s;
        }
        .nav-link:hover {
            background-color: #eff6ff; /* blue-50 */
            color: var(--accent-text-color); /* blue-600 */
        }
        .nav-link.is-viewing { 
            background-color: #e0f2fe; /* sky-100 */
            color: var(--accent-text-color);
            font-weight: 500;
        }
        .nav-link.is-completed {
            color: #3f6212; /* lime-800 */
        }
        .nav-link.is-viewing.is-completed {
            background-color: #dcfce7; /* green-100 */
            color: #15803d; /* green-700 */
        }

        /* Progress Icons for new nav */
        .nav-link .progress-icons {
            display: flex;
            align-items: center;
            margin-left: auto;
        }
        .nav-link .icon-eye,
        .nav-link .icon-tick {
            display: none;
            width: 16px;
            height: 16px;
        }
        .nav-link.is-viewing .icon-eye {
            display: inline-block;
            color: var(--accent-color);
        }
        .nav-link.is-completed .icon-tick {
            display: inline-block;
            color: var(--completed-color);
        }
        .nav-link.is-viewing.is-completed .icon-eye {
            display: none;
        }

        /* --- NEW: Welcome Animations --- */
        .typewriter {
            display: inline-block;
            overflow: hidden; /* Ensures the text is not visible until typed */
            white-space: nowrap; /* Keeps the text on a single line */
            /* REMOVED: border-right: .1em solid var(--accent-color); */
            letter-spacing: .05em; /* A bit tighter */
            animation: 
                typing 4s steps(17, end) infinite; /* MODIFIED: Removed blink-caret animation */
            max-width: 100%; /* Ensure it doesn't overflow */
        }

        /* The typing effect */
        @keyframes typing {
          0%   { width: 0 }
          40%  { width: 100% } /* Type and hold */
          90%  { width: 100% } /* Hold longer */
          100% { width: 0 }    /* Reset for loop */
        }

        /* REMOVED: @keyframes blink-caret */

        /* --- ADDED BACK: Wave Animation --- */
        .wave {
            display: inline-block;
            animation: wave-animation 2.5s infinite;
            transform-origin: 70% 70%;
        }

        @keyframes wave-animation {
           0% { transform: rotate( 0.0deg) }
           10% { transform: rotate(14.0deg) }
           20% { transform: rotate(-8.0deg) }
           30% { transform: rotate(14.0deg) }
           40% { transform: rotate(-4.0deg) }
           50% { transform: rotate(10.0deg) }
           60% { transform: rotate( 0.0deg) }  /* pause */
          100% { transform: rotate( 0.0deg) }
        }

        /* --- NEW: Typewriter Button Animation --- */
        .typewriter-button {
            overflow: hidden;
            white-space: nowrap;
            vertical-align: bottom; /* Aligns animated text with the icon */
            animation: typing-button 3s steps(6, end) infinite;
        }

        @keyframes typing-button {
            0%   { width: 0 }
            40%  { width: 100% } /* Type */
            80%  { width: 100% } /* Hold */
            100% { width: 0 }    /* Erase */
        }

        /* --- NEW: Search Modal Styles --- */
        #search-modal {
            transition: opacity 0.2s ease-in-out, visibility 0.2s ease-in-out;
        }
        #search-modal[aria-hidden="true"] {
            opacity: 0;
            visibility: hidden;
        }
        #search-modal[aria-hidden="false"] {
            opacity: 1;
            visibility: visible;
        }
        #search-modal[aria-hidden="false"] #search-modal-overlay {
            opacity: 1;
        }
        #search-modal[aria-hidden="false"] > div:last-child {
            transform: translateY(0);
            opacity: 1;
        }

        #search-modal-overlay {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        #search-modal > div:last-child {
            opacity: 0;
            transform: translateY(-20px); /* Animate from top */
            transition: all 0.2s ease-in-out;
        }
        
        .search-result-item {
            display: block;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: background-color 0.2s;
            text-decoration: none;
            color: var(--text-primary);
        }
        .search-result-item:hover {
            background-color: var(--hover-bg-color);
        }
        .search-result-item h4 {
            color: var(--accent-text-color);
            font-weight: 600;
            margin-bottom: 0.25rem;
        }
        .search-result-item p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            /* Truncate snippet */
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
    </style>
</head>
<body class="antialiased">

    <!-- NEW: T&C OVERLAY -->
    <div id="tos-page" class="fixed inset-0 z-[60] bg-white p-4 sm:p-8 flex items-center justify-center hidden">
        <div class="w-full max-w-3xl bg-white rounded-xl shadow-2xl p-6 md:p-8 flex flex-col max-h-[90vh]">
            <h2 class="text-2xl font-bold text-slate-900 mb-4">Terms & Privacy Policy</h2>
            <div class="space-y-4 text-slate-600 text-sm overflow-y-auto pr-2 flex-grow min-h-[200px]">
                <h3 class="font-semibold text-slate-800">1. Introduction</h3>
                <p>Welcome to Mandarin Guide ("Application"). This Application is provided as a personal learning tool. By clicking "Accept & Continue", you agree to be bound by these Terms and Conditions ("Terms"). If you disagree with any part of the terms, you may not use the Application.</p>
                
                <h3 class="font-semibold text-slate-800">2. Privacy Policy</h3>
                <p>We respect your privacy. This Application is designed to work entirely offline and in your browser.</p>
                <ul class="list-disc list-inside space-y-1 pl-4">
                    <li><strong>Data Storage:</strong> All your progress data (such as completed lessons) and your name are stored locally on your device using your browser's <code class="text-xs p-1 bg-slate-100 rounded">localStorage</code>.</li>
                    <li><strong>No Data Collection:</strong> We do not collect, transmit, or store any of your personal data or usage analytics on any external servers. Your progress and name stay on your computer or mobile device.</li>
                    <li><strong>External Links:</strong> The Application contains links to external sites (like Instagram and GitHub) that are not operated by us. If you click on a third-party link, you will be directed to that third party's site. We have no control over and assume no responsibility for the content, privacy policies, or practices of any third-party sites or services.</li>
                </ul>

                <h3 class="font-semibold text-slate-800">3. Local Storage</h3>
                <p>You acknowledge and agree that the Application relies on <code class="text-xs p-1 bg-slate-100 rounded">localStorage</code> to save your progress. If you clear your browser's cache or data, your progress will be permanently lost. We are not responsible for any loss of data.</p>
                
                <h3 class="font-semibold text-slate-800">4. Disclaimer of Warranties</h3>
                <p>The Application is provided "as is", without warranty of any kind, express or implied. The content is for educational purposes only and we make no guarantees regarding its accuracy or completeness.</p>

                <h3 class="font-semibold text-slate-800">5. Changes to Terms</h3>
                <p>We reserve the right to modify these terms at any time. If we do, we may require you to accept the new terms to continue using the Application. (For this demo, this will not happen).</p>
            </div>
            <div class="mt-6 pt-6 border-t border-slate-200 flex-shrink-0">
                <!-- MODIFIED: Name Input -->
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
                    <div>
                        <label for="given-name-input" class="block text-sm font-medium text-slate-700 mb-1">Given Name:</label>
                        <input type="text" id="given-name-input" placeholder="Your Given Name" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p id="given-name-error" class="text-red-600 text-sm mt-1 h-4"></p> <!-- Error message placeholder -->
                    </div>
                    <div>
                        <label for="surname-input" class="block text-sm font-medium text-slate-700 mb-1">Surname:</label>
                        <input type="text" id="surname-input" placeholder="Your Surname" class="w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <p id="surname-error" class="text-red-600 text-sm mt-1 h-4"></p> <!-- Error message placeholder -->
                    </div>
                </div>
                <!-- END MODIFIED -->
                <button id="tos-accept-btn" class="w-full next-page-btn text-base py-3">
                    Accept & Continue
                </button>
            </div>
        </div>
    </div>
    <!-- END T&C OVERLAY -->

    <!-- REMOVED: OVERLAY FOR MOBILE SIDEBAR -->

    <!-- HEADER -->
    <!-- MODIFIED: Added the 'hidden' class to hide by default -->
    <header class="header fixed top-0 left-0 right-0 z-40 h-[var(--header-height)] flex items-center px-4 md:px-6 hidden">
        <!-- REMOVED: Mobile Menu Button -->
        
        <!-- App Title & Logo Wrapper -->
        <div class="flex items-center gap-2">
            <img src="icon-192.png" alt="Mandarin Guide Logo" class="w-8 h-8">
            <h1 class="text-xl font-semibold accent-text">Mandarin Guide</h1>
        </div>
        
        <!-- Social Links Container -->
        <div class="ml-auto flex items-center space-x-2"> <!-- Always visible -->
            
            <!-- REMOVED: Search Icon Button -->
            
            <span class="text-sm text-slate-600 hidden sm:inline">Connect with Admin &gt;&gt;&gt;</span>
            
            <!-- Profile Pic Placeholder -->
            <div class="w-8 h-8 rounded-full bg-slate-200 border border-slate-300 flex items-center justify-center overflow-hidden">
                 <img class="w-full h-full object-cover" 
                      src="./images/profile.jpg" 
                      alt="Brian's profile picture"
                      onerror="this.parentElement.innerHTML = `<svg class='w-6 h-6 text-slate-400' fill='currentColor' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z' clip-rule='evenodd'></path></svg>`">
            </div>

            <!-- Instagram Button -->
            <a href="https://www.instagram.com/brian_offl/" target="_blank" rel="noopener noreferrer" class="insta-btn group flex items-center border border-pink-500 text-pink-500 hover:bg-pink-500 hover:text-white text-sm font-medium py-2 px-2 sm:px-3 rounded-lg transition-all hover:scale-105 transform"> <!-- MODIFIED: Added group, px-2 sm:px-3, transition-all, hover:scale-105, transform -->
                <svg class="w-4 h-4 transition-transform group-hover:scale-[0.9523]" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <!-- MODIFIED: Added transition-transform, group-hover:scale -->
                    <rect x="2" y="2" width="20" height="20" rx="5.657" ry="5.657"></rect>
                    <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"></path>
                </svg>
                <span class="hidden sm:inline-block ml-2 typewriter-button">Insta</span> <!-- MODIFIED: Added hidden sm:inline-block -->
            </a>
            <!-- GitHub Button -->
            <a href="https://github.com/brianhexer" target="_blank" rel="noopener noreferrer" class="group flex items-center border border-gray-700 text-gray-700 hover:bg-gray-700 hover:text-white text-sm font-medium py-2 px-2 sm:px-3 rounded-lg transition-all hover:scale-105 transform"> <!-- MODIFIED: Added group, px-2 sm:px-3, transition-all, hover:scale-105, transform -->
                <svg class="w-4 h-4 transition-transform group-hover:scale-[0.9523]" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"> <!-- MODIFIED: Added transition-transform, group-hover:scale -->
                    <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                </svg>
                <span class="hidden sm:inline-block ml-2 typewriter-button">GitHub</span> <!-- MODIFIED: Added hidden sm:inline-block -->
            </a>

            <!-- NEW: Search Icon Button (MOVED HERE) -->
            <button type="button" aria-label="Search" id="search-icon-btn" class="p-2 rounded-full text-slate-500 border border-slate-300 hover:bg-blue-50 hover:text-blue-600 hover:border-blue-500 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500"> <!-- MODIFIED: Changed border-transparent to border-slate-300 -->
                <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
            </button>
            <!-- END NEW -->
        </div>
    </header>

    <!-- REMOVED: SIDEBAR -->

    <!-- MAIN CONTENT -->
    <!-- MODIFIED: Added the 'hidden' class to hide by default -->
    <main class="main-content hidden"> <!-- No padding-left anymore -->
        <div class="p-6 md:p-10">
            <div class="max-w-4xl mx-auto"> <!-- This centers the content -->
                
                <!-- Welcome Section -->
                <article class="content-page card" data-page-id="home">
                    <div class="p-6 md:p-10 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-t-xl">
                        <h1 class="text-3xl md:text-4xl font-bold mb-2 text-slate-900 flex items-center min-h-[3rem]"> <!-- Added min-height for layout stability -->
                            <!-- MODIFIED: Added id="welcome-message" -->
                            <span class="typewriter" id="welcome-message">Welcome Buddy! <span class="wave">👋🏻</span></span>
                        </h1>
                        <p class="text-lg text-slate-600">Your personal Mandarin learning journey starts here. Use the navigation below to explore lessons, or click to begin with Lesson 1.</p>
                    </div>
                    <div class="p-6 md:p-10">
                        <h2 class="text-2xl font-semibold mb-4">How this works</h2>
                        <p class="mb-4 text-muted">This guide is broken down into 4 levels. Each lesson is its own page.</p>
                        <ul class="list-disc list-inside space-y-2 text-muted">
                            <li>Use the dropdowns below to find and jump to any lesson.</li>
                            <li>Use the "Mark as Completed" button at the bottom of each page to track your progress.</li>
                            <li>Your progress is saved, so you can pick up right where you left off.</li>
                        </ul>
                        
                        <!-- NEW: Home Page Install Button -->
                        <button id="home-install-btn" class="hidden mt-6 w-full sm:w-auto flex items-center justify-center next-page-btn">
                            <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                            <span>Install App for Offline Use</span>
                        </button>
                        
                        <!-- NEW: Progress Bar (Moved from Sidebar) -->
                        <div class="mt-8 pt-4 border-t border-slate-200">
                            <span class="text-xs font-semibold text-slate-500 uppercase tracking-wider">Course Progress</span>
                            <div id="progress-bar-container" class="w-full bg-slate-200 rounded-full h-2.5 my-2 overflow-hidden">
                                <div id="progress-bar" class="bg-blue-600 h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
                            </div>
                            <span id="progress-text" class="text-sm text-slate-600">0 / 33 Completed</span>
                        </div>

                        <!-- NEW: Home Page Navigation -->
                        <div class="mt-6 space-y-3">
                            <h2 class="text-xl font-semibold mb-2">Course Navigation</h2>
                            
                            <!-- Level 1 -->
                            <details class="nav-dropdown group">
                                <summary>Level 1: The Basics</summary>
                                <div class="nav-dropdown-content">
                                    <a href="#" data-page-id="lesson1" class="nav-link"><span>Lesson 1: The Tones (聲調)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson2" class="nav-link"><span>Lesson 2: Basic Greetings (問候)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson3" class="nav-link"><span>Lesson 3: Common Courtesies (禮貌)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson4" class="nav-link"><span>Lesson 4: Numbers 0-10,000 (數字)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson5" class="nav-link"><span>Lesson 5: Introductions (介紹)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson6" class="nav-link"><span>Lesson 6: Yes, No & 'Bu' (是, 不)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson7" class="nav-link"><span>Lesson 7: Question Words (5W1H) (疑問詞)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson8" class="nav-link"><span>Lesson 8: Buying Things (買東西)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                </div>
                            </details>

                            <!-- Level 2 -->
                            <details class="nav-dropdown group">
                                <summary>Level 2: Core Grammar</summary>
                                <div class="nav-dropdown-content">
                                    <a href="#" data-page-id="lesson9" class="nav-link"><span>Lesson 9: Using 'le' (了)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson10" class="nav-link"><span>Lesson 10: Using 'guo' (過)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson11" class="nav-link"><span>Lesson 11: Using 'zai' (在)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson12" class="nav-link"><span>Lesson 12: Dates & Time</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson13" class="nav-link"><span>Lesson 13: Measure Words (量詞)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson14" class="nav-link"><span>Lesson 14: 'De' Particles (的, 地, 得)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson15" class="nav-link"><span>Lesson 15: Comparisons (比, 跟)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson16" class="nav-link"><span>Lesson 16: 'Ba' Sentence (把)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                </div>
                            </details>

                            <!-- Level 3 -->
                            <details class="nav-dropdown group">
                                <summary>Level 3: Adv. & Pro</summary>
                                <div class="nav-dropdown-content">
                                    <a href="#" data-page-id="lesson17" class="nav-link"><span>Lesson 17: Result Complements</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson18" class="nav-link"><span>Lesson 18: Directional Complements</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson19" class="nav-link"><span>Lesson 19: Hobbies & Social</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson20" class="nav-link"><span>Lesson 20: Ordering Food</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson21" class="nav-link"><span>Lesson 21: Modern Tech & Slang</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson22" class="nav-link"><span>Lesson 22: Business & Work</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="lesson23" class="nav-link"><span>Lesson 23: Common Idioms (成語)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                </div>
                            </details>

                            <!-- Level 4 -->
                            <details class="nav-dropdown group">
                                <summary>Level 4: Detailed Chapters</summary>
                                <div class="nav-dropdown-content">
                                    <a href="#" data-page-id="chapter1" class="nav-link"><span>Chapter 1: Mandarin Alphabets</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter2" class="nav-link"><span>Chapter 2: Numbers (Detailed)</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter3" class="nav-link"><span>Chapter 3: Vegetables & Fruits</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter4" class="nav-link"><span>Chapter 4: Daily Life Products</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter5" class="nav-link"><span>Chapter 5: Family Conversations</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter6" class="nav-link"><span>Chapter 6: Friend Conversations</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter7" class="nav-link"><span>Chapter 7: Work Conversations</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter8" class="nav-link"><span>Chapter 8: School & Business</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter9" class="nav-link"><span>Chapter 9: Core Vocabulary</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                    <a href="#" data-page-id="chapter10" class="nav-link"><span>Chapter 10: Test Yourself</span><span class="progress-icons"><svg class="icon-eye" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path></svg><svg class="icon-tick" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></span></a>
                                </div>
                            </details>
                        </div>
                        
                        <!-- "Start Learning" button moved to the end of the "how it works" section -->
                         <div class="page-footer-nav mt-8 pt-0 border-t-0 flex justify-end">
                            <button class="next-page-btn" data-next-page-id="lesson1">
                                <span>Start Learning (Lesson 1)</span>
                                <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                            </button>
                        </div>
                    </div>
                </article>

                <!-- Level 1: The Basics -->
                <section id="level1" class="content-page-container">
                    <!-- Lesson 1: The Tones -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson1">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 1: The Tones (聲調)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Mandarin is a tonal language. The "pitch" or contour of your voice changes the meaning of a syllable. Pinyin (拼音) helps us write these sounds and tones. There are four main tones plus a neutral one.</p>
                        <ul class="space-y-4">
                            <li><strong>1st Tone (<span class="pinyin">mā</span>):</strong> High & Level. Think of a sustained musical note. <span class="hanzi" data-speak="媽">媽</span> (<span class="pinyin">mā</span>) - mother</li>
                            <li><strong>2nd Tone (<span class="pinyin">má</span>):</strong> Rising. Like asking a question, "Huh?". <span class="hanzi" data-speak="麻">麻</span> (<span class="pinyin">má</span>) - hemp</li>
                            <li><strong>3rd Tone (<span class="pinyin">mǎ</span>):</strong> Dipping. Down, then up slightly. <span class="hanzi" data-speak="馬">馬</span> (<span class="pinyin">mǎ</span>) - horse</li>
                            <li><strong>4th Tone (<span class="pinyin">mà</span>):</strong> Falling. A sharp, quick drop, like a command. <span class="hanzi" data-speak="罵">罵</span> (<span class="pinyin">mà</span>) - to scold</li>
                            <li><strong>Neutral Tone (<span class="pinyin">ma</span>):</strong> Light & Quick. No tone mark, pronounced softly. <span class="hanzi" data-speak="嗎">嗎</span> (<span class="pinyin">ma</span>) - question particle</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Tone Pair Practice</h4>
                        <p class="mb-4 text-muted">Mandarin words are often 2 syllables. Practicing common tone pairs is essential for fluency.</p>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3 text-sm">
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>1+1:</span> <span class="hanzi" data-speak="今天">今天</span> (<span class="pinyin">jīntiān</span>) - today</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>1+2:</span> <span class="hanzi" data-speak="中國">中國</span> (<span class="pinyin">Zhōngguó</span>) - China</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>1+3:</span> <span class="hanzi" data-speak="開車">開車</span> (<span class="pinyin">kāichē</span>) - drive car</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>1+4:</span> <span class="hanzi" data-speak="飛機">飛機</span> (<span class="pinyin">fēijì</span>) - airplane</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>2+1:</span> <span class="hanzi" data-speak="美國">美國</span> (<span class="pinyin">Měiguó</span>) - America</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>2+2:</span> <span class="hanzi" data-speak="朋友">朋友</span> (<span class="pinyin">péngyou</span>) - friend</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>2+3:</span> <span class="hanzi" data-speak="銀行">銀行</span> (<span class="pinyin">yínháng</span>) - bank</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>2+4:</span> <span class="hanzi" data-speak="回答">回答</span> (<span class="pinyin">huídá</span>) - answer</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>3+1:</span> <span class="hanzi" data-speak="你好">你好</span> (<span class="pinyin">nǐ hǎo</span>) - hello</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>3+2:</span> <span class="hanzi" data-speak="水果">水果</span> (<span class="pinyin">shuǐguǒ</span>) - fruit</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>3+3:</span> <span class="hanzi" data-speak="你好">你好</span> (<span class="pinyin">nǐ hǎo</span>) - hello <em class="text-xs text-slate-500">(spoken as 2+3)</em></div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>3+4:</span> <span class="hanzi" data-speak="喜歡">喜歡</span> (<span class="pinyin">xǐhuan</span>) - like</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>4+1:</span> <span class="hanzi" data-speak="再見">再見</span> (<span class="pinyin">zàijiàn</span>) - goodbye</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>4+2:</span> <span class="hanzi" data-speak="電視">電視</span> (<span class="pinyin">diànshì</span>) - TV</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>4+3:</span> <span class="hanzi" data-speak="考試">考試</span> (<span class="pinyin">kǎoshì</span>) - test</div> <!-- MODIFIED -->
                            <div class="pinyin flex items-center justify-start flex-wrap gap-x-2 rounded-md"><span>4+4:</span> <span class="hanzi" data-speak="謝謝">謝謝</span> (<span class="pinyin">xièxie</span>) - thanks <em class="text-xs text-slate-500">(2nd is neutral)</em></div> <!-- MODIFIED -->
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Back to Home</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson1"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson2"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                    </article>

                    <!-- NEW: Lesson 2: Basic Greetings (Re-added) -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson2">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 2: Basic Greetings (問候)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Let's learn the most basic greetings. These are essential for starting any conversation. We will focus on Traditional Chinese, common in Taiwan.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Hello (你好)</h4>
                        <ul class="space-y-4">
                            <li><strong>Hello:</strong> <span class="hanzi" data-speak="你好">你好</span> (<span class="pinyin">nǐ hǎo</span>)
                                <br><small class="text-muted">"You good". The most common greeting. You can say this to anyone.</small></li>
                            
                            <li><strong>Hello (polite, singular):</strong> <span class="hanzi" data-speak="您好">您好</span> (<span class="pinyin">nín hǎo</span>)
                                <br><small class="text-muted">Used for elders, teachers, or in formal situations. "You (polite) good".</small></li>
                            
                            <li><strong>Hello (plural):</strong> <span class="hanzi" data-speak="你們好">你們好</span> (<span class="pinyin">nǐmen hǎo</span>)
                                <br><small class="text-muted">Used to greet a group of people. "You (plural) good".</small></li>
                            
                            <li><strong>How are you?:</strong> <span class="hanzi" data-speak="你好嗎">你好嗎?</span> (<span class="pinyin">nǐ hǎo ma?</span>)
                                <br><small class="text-muted">The classic textbook "How are you?". The particle <span class="pinyin">ma</span> turns it into a question.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Time-Specific Greetings</h4>
                        <ul class="space-y-4">
                            <li><strong>Good morning:</strong> <span class="hanzi" data-speak="早安">早安</span> (<span class="pinyin">zǎo ān</span>)
                                <br><small class="text-muted">Very common. (Literally "morning peace")</small></li>
                            
                            <li><strong>Good afternoon:</strong> <span class="hanzi" data-speak="午安">午安</span> (<span class="pinyin">wǔ ān</span>)
                                <br><small class="text-muted">The standard afternoon greeting. (Literally "noon peace")</small></li>
                            
                            <li><strong>Good night:</strong> <span class="hanzi" data-speak="晚安">晚安</span> (<span class="pinyin">wǎn ān</span>)
                                <br><small class="text-muted">"Evening peace". Used when leaving for the night or going to sleep.</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Saying Goodbye</h4>
                        <ul class="space-y-4">
                            <li><strong>Goodbye:</strong> <span class="hanzi" data-speak="再見">再見</span> (<span class="pinyin">zàijiàn</span>)
                                <br><small class="text-muted">"See you again". The standard, all-purpose goodbye.</small></li>
                            
                            <li><strong>Bye-bye:</strong> <span class="hanzi" data-speak="拜拜">拜拜</span> (<span class="pinyin">bāibai</span>)
                                <br><small class="text-muted">A casual, common alternative (from English).</small></li>
                        </ul>

                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="lesson1">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Previous Lesson</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson2"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson3"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                    </article>
                    <!-- END NEW Lesson 2 -->

                    <!-- NEW: Lesson 3: Common Courtesies (Re-added) -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson3">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 3: Common Courtesies (禮貌)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Polite phrases are essential for daily interaction. Using them shows respect and makes communication much smoother. These are some of the first words you should learn.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Saying "Thank You" (謝謝)</h4>
                        <ul class="space-y-4">
                            <li><strong>Thank you:</strong> <span class="hanzi" data-speak="謝謝">謝謝</span> (<span class="pinyin">xièxie</span>)
                                <br><small class="text-muted">The most common and universal way to say thanks.</small></li>
                            
                            <li><strong>Many thanks:</strong> <span class="hanzi" data-speak="多謝">多謝</span> (<span class="pinyin">duōxiè</span>)
                                <br><small class="text-muted">"Many thanks." Often used when receiving a gift or a significant favor.</small></li>

                            <li><strong>Thank you (Formal):</strong> <span class="hanzi" data-speak="感謝你">感謝你</span> (<span class="pinyin">gǎnxiè nǐ</span>)
                                <br><small class="text-muted">"Grateful to you." This is more formal and heartfelt.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Saying "You're Welcome" (不客氣)</h4>
                        <ul class="space-y-4">
                            <li><strong>You're welcome:</strong> <span class="hanzi" data-speak="不客氣">不客氣</span> (<span class="pinyin">bú kèqi</span>)
                                <br><small class="text-muted">The standard reply. (Literally "Don't be a guest" / "Don't be polite")</small></li>
                            
                            <li><strong>Not at all:</strong> <span class="hanzi" data-speak="不會">不會</span> (<span class="pinyin">bú huì</span>)
                                <br><small class="text-muted">Very common in Taiwan. (Literally "it's not [a big deal]")</small></li>
                            
                            <li><strong>No need to thank:</strong> <span class="hanzi" data-speak="不用謝">不用謝</span> (<span class="pinyin">bú yòng xiè</span>)
                                <br><small class="text-muted">"No need for thanks." Also very common and slightly more casual.</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Saying "Sorry" (對不起)</h4>
                        <ul class="space-y-4">
                            <li><strong>Sorry:</strong> <span class="hanzi" data-speak="對不起">對不起</span> (<span class="pinyin">duìbuqǐ</span>)
                                <br><small class="text-muted">Used for more significant mistakes or when you've genuinely done something wrong.</small></li>
                            
                            <li><strong>Excuse me / Sorry:</strong> <span class="hanzi" data-speak="不好意思">不好意思</span> (<span class="pinyin">bù hǎoyìsi</span>)
                                <br><small class="text-muted">Very common. Used for minor inconveniences (bumping into someone), getting someone's attention, or feeling embarrassed.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Replying to "Sorry" (沒關係)</h4>
                        <ul class="space-y-4">
                            <li><strong>It's okay / No problem:</strong> <span class="hanzi" data-speak="沒關係">沒關係</span> (<span class="pinyin">méi guānxi</span>)
                                <br><small class="text-muted">The standard, polite reply to <span class="pinyin">duìbuqǐ</span>. (Literally "it has no relation / it's not a big deal")</small></li>
                            
                            <li><strong>It's nothing:</strong> <span class="hanzi" data-speak="沒事">沒事</span> (<span class="pinyin">méi shì</span>)
                                <br><small class="text-muted">A more casual reply. (Literally "no thing" / "no event")</small></li>
                        </ul>

                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="lesson2">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Previous Lesson</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson3"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson4"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                    </article>
                    <!-- END NEW Lesson 3 -->

                    <!-- NEW: Lesson 4: Numbers (Re-added) -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson4">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 4: Numbers 0-10,000 (數字)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Understanding numbers is crucial for everything from telling time to buying things. Let's start with the basics and build our way up.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Numbers 0-10</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Number</th>
                                        <th>Character</th>
                                        <th>Pinyin</th>
                                    </tr>
                                <thead>
                                <tbody>
                                    <tr><td>0</td><td><span class="hanzi" data-speak="零">零</span></td><td><span class="pinyin">líng</span></td></tr>
                                    <tr><td>1</td><td><span class="hanzi" data-speak="一">一</span></td><td><span class="pinyin">yī</span></td></tr>
                                    <tr><td>2</td><td><span class="hanzi" data-speak="二">二</span></td><td><span class="pinyin">èr</span></td></tr>
                                    <tr><td>3</td><td><span class="hanzi" data-speak="三">三</span></td><td><span class="pinyin">sān</span></td></tr>
                                    <tr><td>4</td><td><span class="hanzi" data-speak="四">四</span></td><td><span class="pinyin">sì</span></td></tr>
                                    <tr><td>5</td><td><span class="hanzi" data-speak="五">五</span></td><td><span class="pinyin">wǔ</span></td></tr>
                                    <tr><td>6</td><td><span class="hanzi" data-speak="六">六</span></td><td><span class="pinyin">liù</span></td></tr>
                                    <tr><td>7</td><td><span class="hanzi" data-speak="七">七</span></td><td><span class="pinyin">qī</span></td></tr>
                                    <tr><td>8</td><td><span class="hanzi" data-speak="八">八</span></td><td><span class="pinyin">bā</span></td></tr>
                                    <tr><td>9</td><td><span class="hanzi" data-speak="九">九</span></td><td><span class="pinyin">jiǔ</span></td></tr>
                                    <tr><td>10</td><td><span class="hanzi" data-speak="十">十</span></td><td><span class="pinyin">shí</span></td></tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Constructing Numbers (11-99)</h4>
                        <p class="mb-4 text-muted">Mandarin numbers follow a simple, logical structure.</p>
                        <ul class="space-y-4">
                            <li><strong>11 to 19:</strong> "Ten" + Number.
                                <br><small class="text-muted">Ex: 11 is "ten-one": <span class="hanzi" data-speak="十一">十一</span> (<span class="pinyin">shí yī</span>)</small>
                                <br><small class="text-muted">Ex: 17 is "ten-seven": <span class="hanzi" data-speak="十七">十七</span> (<span class="pinyin">shí qī</span>)</small></li>
                            <li><strong>Multiples of 10:</strong> Number + "Ten".
                                <br><small class="text-muted">Ex: 20 is "two-ten": <span class="hanzi" data-speak="二十">二十</span> (<span class="pinyin">èr shí</span>)</small>
                                <br><small class="text-muted">Ex: 50 is "five-ten": <span class="hanzi" data-speak="五十">五十</span> (<span class="pinyin">wǔ shí</span>)</small></li>
                            <li><strong>Other Numbers (21-99):</strong> (Number + "Ten") + Number.
                                <br><small class="text-muted">Ex: 25 is "two-ten-five": <span class="hanzi" data-speak="二十五">二十五</span> (<span class="pinyin">èr shí wǔ</span>)</small>
                                <br><small class="text-muted">Ex: 83 is "eight-ten-three": <span class="hanzi" data-speak="八十三">八十三</span> (<span class="pinyin">bā shí sān</span>)</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Larger Numbers</h4>
                        <ul class="space-y-4">
                            <li><strong>Hundred:</strong> <span class="hanzi" data-speak="百">百</span> (<span class="pinyin">bǎi</span>)
                                <br><small class="text-muted">Ex: 100: <span class="hanzi" data-speak="一百">一百</span> (<span class="pinyin">yì bǎi</span>)</small>
                                <br><small class="text-muted">Ex: 365: <span class="hanzi" data-speak="三百六十五">三百六十五</span> (<span class="pinyin">sān bǎi liù shí wǔ</span>)</small></li>
                            <li><strong>Thousand:</strong> <span class="hanzi" data-speak="千">千</span> (<span class="pinyin">qiān</span>)
                                <br><small class="text-muted">Ex: 1,000: <span class="hanzi" data-speak="一千">一千</span> (<span class="pinyin">yì qiān</span>)</small>
                                <br><small class="text-muted">Ex: 2,500: <span class="hanzi" data-speak="兩千五百">兩千五百</span> (<span class="pinyin">liǎng qiān wǔ bǎi</span>) - *Note the use of 兩 (liǎng)!*</small></li>
                            <li><strong>Ten Thousand:</strong> <span class="hanzi" data-speak="萬">萬</span> (<span class="pinyin">wàn</span>)
                                <br><small class="text-muted">Mandarin groups by 10,000s, not 1,000s. This is a key concept.</small>
                                <br><small class="text-muted">Ex: 10,000: <span class="hanzi" data-speak="一萬">一萬</span> (<span class="pinyin">yí wàn</span>)</small>
                                <br><small class="text-muted">Ex: 50,000: <span class="hanzi" data-speak="五萬">五萬</span> (<span class="pinyin">wǔ wàn</span>) (i.e., "five ten-thousands")</small></li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Important Rule: 二 (èr) vs. 兩 (liǎng)</h5>
                            <p class="text-sm">Both mean "two," but they are used differently.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-1">
                                <li>Use <span class="pinyin">二</span> (<span class="hanzi" data-speak="二">èr</span>) when counting (1, 2, 3...) and for numbers like 12, 20, 200 (as in `二百`).</li>
                                <li>Use <span class="pinyin">兩</span> (<span class="hanzi" data-speak="兩">liǎng</span>) when specifying "two of something" with a measure word (e.g., <span class="hanzi" data-speak="兩個人">兩個人</span> - two people).</li>
                                <li><strong>Crucially:</strong> Use <span class="pinyin">兩</span> (<span class="hanzi" data-speak="兩">liǎng</span>) for 2,000 (<span class="hanzi" data-speak="兩千">liǎng qiān</span>) and 20,000 (<span class="hanzi" data-speak="兩萬">liǎng wàn</span>).</li>
                            </ul>
                        </div>
                        
                        <!-- NEW: Added missing footer for Lesson 4 -->
                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="lesson3">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Previous Lesson</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson4"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson5"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                        <!-- END NEW FOOTER -->
                    </article>

                    <!-- MODIFIED: Lesson 5: Introductions (Full Content Added) -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson5">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 5: Introductions (介紹)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Now that you know some greetings, let's learn how to introduce yourself and ask for someone's name.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Asking For a Name</h4>
                        <ul class="space-y-4">
                            <li><strong>What is your name?:</strong> <span class="hanzi" data-speak="你叫什麼名字">你叫什麼名字？</span> (<span class="pinyin">nǐ jiào shénme míngzi?</span>)
                                <br><small class="text-muted">"You are called what name?". The standard, common way to ask.</small></li>
                            
                            <li><strong>What is your surname? (polite):</strong> <span class="hanzi" data-speak="您貴姓">您貴姓？</span> (<span class="pinyin">nín guìxìng?</span>)
                                <br><small class="text-muted">"Your honorable surname?". Very polite and formal. Used in business or for elders.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Giving Your Name</h4>
                        <ul class="space-y-4">
                            <li><strong>My name is...:</strong> <span class="hanzi" data-speak="我叫">我叫</span>... (<span class="pinyin">wǒ jiào...</span>)
                                <br><small class="text-muted">"I am called...". Used for your full name or given name.</small>
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="我叫王大明">我叫王大明</span> (<span class="pinyin">Wǒ jiào Wáng Dàmíng</span>)</small></li>
                            
                            <li><strong>My surname is...:</strong> <span class="hanzi" data-speak="我姓">我姓</span>... (<span class="pinyin">wǒ xìng...</span>)
                                <br><small class="text-muted">"My surname is...". The standard reply to <span class="pinyin">nín guìxìng</span>.</small>
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="我姓王">我姓王</span> (<span class="pinyin">Wǒ xìng Wáng</span>)</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Other Useful Phrases</h4>
                        <ul class="space-y-4">
                            <li><strong>Nice to meet you:</strong> <span class="hanzi" data-speak="很高興認識你">很高興認識你</span> (<span class="pinyin">hěn gāoxìng rènshi nǐ</span>)
                                <br><small class="text-muted">"Very happy to know you."</small></li>
                            
                            <li><strong>I am [nationality] person:</strong> <span class="hanzi" data-speak="我是...人">我是...人</span> (<span class="pinyin">wǒ shì...rén</span>)
                                <br><small class="text-muted">Ex: I am American: <span class="hanzi" data-speak="我是美國人">我是美國人</span> (<span class="pinyin">wǒ shì Měiguó rén</span>)</small>
                                <br><small class="text-muted">Ex: I am Taiwanese: <span class="hanzi" data-speak="我是台灣人">我是台灣人</span> (<span class="pinyin">wǒ shì Táiwān rén</span>)</small></li>
                        </ul>

                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="lesson4">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Previous Lesson</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson5"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson6"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                    </article>
                    
                    <!-- NEW: Adding Missing Lesson 6 -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson6">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 6: Yes, No & 'Bu' (是, 不)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Saying "yes" and "no" in Mandarin isn't as simple as in English. There's no single word for "yes." Instead, you usually answer a question by repeating the verb or adjective used.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">1. Answering with 是 (shì) / 不是 (bú shì)</h4>
                        <p class="mb-4 text-muted">You only use <span class="hanzi" data-speak="是">是</span> (<span class="pinyin">shì</span>) to say "yes" if the question was asked using <span class="hanzi" data-speak="是">是</span>. This is for questions about identity or state (Are you...?).</p>
                        <ul class="space-y-4">
                            <li><strong>Q: Are you American?:</strong> <span class="hanzi" data-speak="你是美國人嗎">你是美國人嗎？</span> (<span class="pinyin">Nǐ shì Měiguó rén ma?</span>)
                                <br><small class="text-muted"><strong>Yes:</strong> <span class="hanzi" data-speak="是">是</span> (<span class="pinyin">shì</span>) or <span class="hanzi" data-speak="我是">我是</span> (<span class="pinyin">wǒ shì</span>).</small>
                                <br><small class="text-muted"><strong>No:</strong> <span class="hanzi" data-speak="不是">不是</span> (<span class="pinyin">bú shì</span>).</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">2. The "Verb-Echo" Rule (The Real "Yes/No")</h4>
                        <p class="mb-4 text-muted">For most questions, you answer "yes" by repeating the main verb or "no" by saying <span class="hanzi" data-speak="不">不</span> (<span class="pinyin">bù</span>) + Verb.</p>
                        <ul class="space-y-4">
                            <li><strong>Q: Do you want coffee?:</strong> <span class="hanzi" data-speak="你要咖啡嗎">你要咖啡嗎？</span> (<span class="pinyin">Nǐ yào kāfēi ma?</span>)
                                <br><small class="text-muted"><strong>Yes (I want):</strong> <span class="hanzi" data-speak="要">要</span> (<span class="pinyin">yào</span>).</small>
                                <br><small class="text-muted"><strong>No (I don't want):</strong> <span class="hanzi" data-speak="不要">不要</span> (<span class="pinyin">bú yào</span>).</small></li>
                            
                            <li><strong>Q: Are you busy?:</strong> <span class="hanzi" data-speak="你忙嗎">你忙嗎？</span> (<span class="pinyin">Nǐ máng ma?</span>) (Here the adjective <span class="pinyin">máng</span> is the verb)
                                <br><small class="text-muted"><strong>Yes (I'm busy):</strong> <span class="hanzi" data-speak="很忙">很忙</span> (<span class="pinyin">hěn máng</span>). (Using <span class="pinyin">hěn</span> is more natural than just <span class="pinyin">máng</span>).</small>
                                <br><small class="text-muted"><strong>No (Not busy):</strong> <span class="hanzi" data-speak="不忙">不忙</span> (<span class="pinyin">bù máng</span>).</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">3. Other "Yes/No" Pairs</h4>
                        <ul class="space-y-4">
                            <li><strong>For "right/correct":</strong> <span class="hanzi" data-speak="對">對</span> (<span class="pinyin">duì</span>) / <span class="hanzi" data-speak="不對">不對</span> (<span class="pinyin">bú duì</span>)
                                <br><small class="text-muted">Q: <span class="hanzi" data-speak="這是你的嗎">這是你的嗎？</span> (Is this yours?) A: <span class="hanzi" data-speak="對">對</span> (Correct).</small></li>
                            
                            <li><strong>For "have/has":</strong> <span class="hanzi" data-speak="有">有</span> (<span class="pinyin">yǒu</span>) / <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>)
                                <br><small class="text-muted">Q: <span class="hanzi" data-speak="你有錢嗎">你有錢嗎？</span> (Do you have money?) A: <span class="hanzi" data-speak="沒有">沒有</span> (Don't have).</small>
                                <br><small class="text-muted"><strong>Note:</strong> The negative of <span class="hanzi" data-speak="有">有</span> is <span class="hanzi" data-speak="沒有">沒有</span>, NOT <span class="pinyin">bù yǒu</span>!</small></li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: Tone Change Rule for 不 (bù)</h5>
                            <p class="text-sm">The particle <span class="hanzi" data-speak="不">不</span> (<span class="pinyin">bù</span>) is 4th tone by default. However, it changes to 2nd tone (<span class="pinyin">bú</span>) when it comes *before* another 4th tone syllable. This makes it easier to say.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-1">
                                <li><strong>Stays 4th tone:</strong> <span class="hanzi" data-speak="不吃">不吃</span> (<span class="pinyin">bù chī</span>) - (chī is 1st tone)</li>
                                <li><strong>Stays 4th tone:</strong> <span class="hanzi" data-speak="不忙">不忙</span> (<span class="pinyin">bù máng</span>) - (máng is 2nd tone)</li>
                                <li><strong>Stays 4th tone:</strong> <span class="hanzi" data-speak="不好">不好</span> (<span class="pinyin">bù hǎo</span>) - (hǎo is 3rd tone)</li>
                                <li><strong>Changes to 2nd tone:</strong> <span class="hanzi" data-speak="不是">不是</span> (<span class="pinyin">bú shì</span>) - (shì is 4th tone)</li>
                                <li><strong>Changes to 2nd tone:</strong> <span class="hanzi" data-speak="不要">不要</span> (<span class="pinyin">bú yào</span>) - (yào is 4th tone)</li>
                            </ul>
                        </div>
                        
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson5"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson6"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson7"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>

                    <!-- NEW: Adding Missing Lesson 7 -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson7">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 7: Question Words (疑問詞)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Asking questions is key to conversation. Unlike English, Mandarin question words (like "who," "what," "where") don't move to the front of the sentence. You simply replace the "answer" part of a statement with the question word.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">The "5W1H" Questions</h4>
                        <ul class="space-y-4">
                            <li><strong>Who:</strong> <span class="hanzi" data-speak="誰">誰</span> (<span class="pinyin">shéi</span>)
                                <br><small class="text-muted">Statement: <span class="hanzi" data-speak="他是王先生">他是王先生</span> (He is Mr. Wang)</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="他是誰">他是誰？</span> (<span class="pinyin">Tā shì shéi?</span>) - (He is who?)</small></li>

                            <li><strong>What:</strong> <span class="hanzi" data-speak="什麼">什麼</span> (<span class="pinyin">shénme</span>)
                                <br><small class="text-muted">Statement: <span class="hanzi" data-speak="這是一本書">這是一本書</span> (This is a book)</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="這是什麼">這是什麼？</span> (<span class="pinyin">Zhè shì shénme?</span>) - (This is what?)</small></li>
                            
                            <li><strong>Where:</strong> <span class="hanzi" data-speak="哪裡">哪裡</span> (<span class="pinyin">nǎlǐ</span>) or <span class="hanzi" data-speak="哪兒">哪兒</span> (<span class="pinyin">nǎr</span> - more common in Northern China)
                                <br><small class="text-muted">Statement: <span class="hanzi" data-speak="我在家">我在家</span> (I am at home)</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="你在哪裡">你在哪裡？</span> (<span class="pinyin">Nǐ zài nǎlǐ?</span>) - (You are at where?)</small></li>

                            <li><strong>When:</strong> <span class="hanzi" data-speak="什麼時候">什麼時候</span> (<span class="pinyin">shénme shíhou</span>) - "what time/moment"
                                <br><small class="text-muted">Statement: <span class="hanzi" data-speak="我明天去">我明天去</span> (I go tomorrow)</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="你什麼時候去">你什麼時候去？</span> (<span class="pinyin">Nǐ shénme shíhou qù?</span>) - (You when go?)</small></li>
                            
                            <li><strong>Why:</strong> <span class="hanzi" data-speak="為什麼">為什麼</span> (<span class="pinyin">wèishénme</span>) - "for what"
                                <br><small class="text-muted">This one *can* go at the beginning or after the subject.</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="你為什麼學中文">你為什麼學中文？</span> (<span class="pinyin">Nǐ wèishénme xué Zhōngwén?</span>) - (You why study Chinese?)</small></li>
                            
                            <li><strong>How:</strong> <span class="hanzi" data-speak="怎麼">怎麼</span> (<span class="pinyin">zěnme</span>)
                                <br><small class="text-muted">Used for *how* to do something (the manner or method).</small>
                                <br><small class="text-muted">Question: <span class="hanzi" data-speak="這個中文怎麼說">這個中文怎麼說？</span> (<span class="pinyin">Zhège Zhōngwén zěnme shuō?</span>) - (This, Chinese how to say?)</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Extra: Other Important Question Words</h4>
                        <ul class="space-y-4">
                            <li><strong>How much (money/many):</strong> <span class="hanzi" data-speak="多少">多少</span> (<span class="pinyin">duōshao</span>) - "many-few"
                                <br><small class="text-muted">Used for numbers over ~10 or when you don't know the amount.</small>
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="多少錢">多少錢？</span> (<span class="pinyin">Duōshao qián?</span>) - How much money?</small></li>
                            
                            <li><strong>How many (a few):</strong> <span class="hanzi" data-speak="幾個">幾個</span> (<span class="pinyin">jǐ ge</span>)
                                <br><small class="text-muted">Used when you expect a small number (under 10). <span class="pinyin">ge</span> (個) is the most common measure word.</small>
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="你有幾個小孩">你有幾個小孩？</span> (<span class="pinyin">Nǐ yǒu jǐ ge xiǎohái?</span>) - How many kids do you have?</small></li>

                            <li><strong>How about...?:</strong> <span class="hanzi" data-speak="怎麼樣">怎麼樣</span> (<span class="pinyin">zěnmeyàng</span>)
                                <br><small class="text-muted">Used to ask for an opinion or check on a state. "How is it?"</small>
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="這杯咖啡怎麼樣">這杯咖啡怎麼樣？</span> (<span class="pinyin">Zhè bēi kāfēi zěnmeyàng?</span>) - How is this cup of coffee?</small></li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Alternative: The "A-not-A" Question</h5>
                            <p class="text-sm">A very common way to ask a yes/no question without using <span class="hanzi" data-speak="嗎">嗎</span> (<span class="pinyin">ma</span>) is to use the "A-not-A" pattern (Verb/Adjective + Not + Verb/Adjective).</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-1">
                                <li><strong>Instead of:</strong> <span class="hanzi" data-speak="你是美國人嗎">你是美國人嗎？</span> (<span class="pinyin">Nǐ shì Měiguó rén ma?</span>)
                                    <br><strong>You can say:</strong> <span class="hanzi" data-speak="你是不是美國人">你是不是美國人？</span> (<span class="pinyin">Nǐ shì bú shì Měiguó rén?</span>) - (You are or are not American?)</li>
                                
                                <li><strong>Instead of:</strong> <span class="hanzi" data-speak="你忙嗎">你忙嗎？</span> (<span class="pinyin">Nǐ máng ma?</span>)
                                    <br><strong>You can say:</strong> <span class="hanzi" data-speak="你忙不忙">你忙不忙？</span> (<span class="pinyin">Nǐ máng bù máng?</span>) - (You busy or not busy?)</li>
                                
                                <li><strong>Note for <span class="pinyin">yǒu</span> (有):</strong> The pattern is <span class="hanzi" data-speak="有沒有">有沒有</span> (<span class="pinyin">yǒu méiyǒu</span>).
                                    <br>Ex: <span class="hanzi" data-speak="你有沒有錢">你有沒有錢？</span> (<span class="pinyin">Nǐ yǒu méiyǒu qián?</span>) - Do you have money (or not)?</li>
                            </ul>
                        </div>
                        
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson6"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson7"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson8"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <!-- END NEW Lesson 7 -->

                    <!-- MODIFIED: Full Content Added for Lesson 8 -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson8">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 8: Buying Things (買東西)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Knowing how to ask for prices and buy things is one of the most useful skills for traveling. Here are the essential phrases you'll need, using Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Essential Phrases</h4>
                        <ul class="space-y-4">
                            <li><strong>I want to buy...:</strong> <span class="hanzi" data-speak="我想買">我想買...</span> (<span class="pinyin">wǒ xiǎng mǎi...</span>)
                                <br><small class="text-muted">Ex: <span class="hanzi" data-speak="我想買這個">我想買這個</span> (<span class="pinyin">wǒ xiǎng mǎi zhège</span>) - I want to buy this.</small></li>

                            <li><strong>How much is this?:</strong> <span class="hanzi" data-speak="這個多少錢">這個多少錢？</span> (<span class="pinyin">zhège duōshao qián?</span>)
                                <br><small class="text-muted">The most important question. "This" (這個) + "how much money?" (多少錢).</small></li>
                            
                            <li><strong>How much is that?:</strong> <span class="hanzi" data-speak="那個多少錢">那個多少錢？</span> (<span class="pinyin">nàge duōshao qián?</span>)
                                <br><small class="text-muted">Use <span class="hanzi" data-speak="那個">那個</span> (<span class="pinyin">nàge</span>) for "that one".</small></li>

                            <li><strong>Too expensive!:</strong> <span class="hanzi" data-speak="太貴了">太貴了！</span> (<span class="pinyin">tài guì le!</span>)
                                <br><small class="text-muted">A key phrase for bargaining in markets!</small></li>

                            <li><strong>Can it be cheaper?:</strong> <span class="hanzi" data-speak="可以便宜一點嗎">可以便宜一點嗎？</span> (<span class="pinyin">kěyǐ piányí yìdiǎn ma?</span>)
                                <br><small class="text-muted">"Can [you be] a little cheaper?"</small></li>

                            <li><strong>I'll take this one:</strong> <span class="hanzi" data-speak="我要這個">我要這個</span> (<span class="pinyin">wǒ yào zhège</span>)
                                <br><small class="text-muted">"I want this one."</small></li>

                            <li><strong>Do you have...?:</strong> <span class="hanzi" data-speak="你們有沒有">你們有沒有...？</span> (<span class="pinyin">nǐmen yǒu méiyǒu...?</span>)
                                <br><small class="text-muted">Uses the "A-not-A" structure. "You (plural) have or not have...?"</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Sample Dialogue (At a Night Market)</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Role</th>
                                        <th>Traditional Chinese</th>
                                        <th>Pinyin</th>
                                        <th>English</th> <!-- NEW COLUMN -->
                                    </tr>
                                <thead>
                                <tbody>
                                    <tr>
                                        <td>Customer</td>
                                        <td><span class="hanzi" data-speak="老闆，這個多少錢">老闆，這個多少錢？</span></td>
                                        <td><span class="pinyin">Lǎobǎn, zhège duōshao qián?</span></td>
                                        <td>Boss, how much is this?</td> <!-- NEW -->
                                    </tr>
                                    <tr>
                                        <td>Vendor</td>
                                        <td><span class="hanzi" data-speak="這個三百塊">這個三百塊。</span></td>
                                        <td><span class="pinyin">Zhège sān bǎi kuài.</span></td>
                                        <td>This one is 300 dollars.</td> <!-- NEW -->
                                    </tr>
                                    <tr>
                                        <td>Customer</td>
                                        <td><span class="hanzi" data-speak="太貴了！兩百五可以嗎">太貴了！兩百五可以嗎？</span></td>
                                        <td><span class="pinyin">Tài guì le! Liǎng bǎi wǔ kěyǐ ma?</span></td>
                                        <td>Too expensive! Can you do 250?</td> <!-- NEW -->
                                    </tr>
                                    <tr>
                                        <td>Vendor</td>
                                        <td><span class="hanzi" data-speak="不行啦，最少兩百八">不行啦，最少兩百八。</span></td>
                                        <td><span class="pinyin">Bùxíng la, zuì shǎo liǎng bǎi bā.</span></td>
                                        <td>No way, 280 is the lowest.</td> <!-- NEW -->
                                    </tr>
                                    <tr>
                                        <td>Customer</td>
                                        <td><span class="hanzi" data-speak="好，我要這個。謝謝">好，我要這個。謝謝。</span></td>
                                        <td><span class="pinyin">Hǎo, wǒ yào zhège. Xièxie.</span></td>
                                        <td>Okay, I'll take this. Thanks.</td> <!-- NEW -->
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: Currency & Bargaining Tips</h5>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-2">
                                <li><strong>Currency:</strong> In Taiwan, the currency is the New Taiwan Dollar (NTD), or <span class="hanzi" data-speak="新台幣">新台幣</span> (<span class="pinyin">xīn táibì</span>).</li>
                                <li><strong>Spoken vs. Written:</strong> In writing, you'll see <span class="hanzi" data-speak="元">元</span> (<span class="pinyin">yuán</span>). In spoken language, people almost always say <span class="hanzi" data-speak="塊">塊</span> (<span class="pinyin">kuài</span>). (e.g., <span class="hanzi" data-speak="三百塊">三百塊</span> for 300 dollars).</li>
                                <li><strong>Where to Bargain:</strong> Bargaining (討價還價 / <span class="pinyin">tǎojià huánjià</span>) is common and expected in night markets (<span class="hanzi" data-speak="夜市">夜市</span> / <span class="pinyin">yèshì</span>) and small, independent shops.</li>
                                <li><strong>Where NOT to Bargain:</strong> Do NOT bargain in convenience stores (like 7-11), department stores, or restaurants. The price listed is the price you pay.</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3">
                                <button class="prev-page-btn" data-prev-page-id="lesson7">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg>
                                    <span>Previous Lesson</span>
                                </button>
                                <button class="home-page-btn" data-home-page-id="home">
                                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg>
                                    <span>Home</span>
                                </button>
                            </div>
                            <div class="flex gap-3">
                                <button class="mark-complete-btn" data-page-id="lesson8"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button>
                                <button class="next-page-btn" data-next-page-id="lesson9"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button>
                            </div>
                        </div>
                    </article>
                    <!-- END MODIFIED -->
                    
                    <!-- NEW: Adding Missing Lesson 9 -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson9">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 9: Using 'le' (了)</h3>
                        <p class="mb-5 text-muted leading-relaxed">The particle <span class="hanzi" data-speak="了">了</span> (<span class="pinyin">le</span>) is one of the most important concepts in Mandarin. It does NOT simply mean "past tense." It has two primary functions: indicating the completion of an action, or indicating a change of state.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Function 1: Action Completion (動作的完成)</h4>
                        <p class="mb-4 text-muted">When placed *directly after a verb*, <span class="pinyin">le</span> indicates that the action has been completed. This is the closest it gets to a "past tense" idea.</p>
                        <ul class="space-y-4">
                            <li><strong>I ate:</strong> <span class="hanzi" data-speak="我吃了">我吃了</span> (<span class="pinyin">wǒ chī le</span>)
                                <br><small class="text-muted">The action of "eating" is complete.</small></li>

                            <li><strong>He bought it:</strong> <span class="hanzi" data-speak="他買了">他買了</span> (<span class="pinyin">tā mǎi le</span>)
                                <br><small class="text-muted">The action of "buying" is complete.</small></li>
                            
                            <li><strong>I finished watching the movie:</strong> <span class="hanzi" data-speak="我看完了電影">我看完了電影</span> (<span class="pinyin">wǒ kàn wán le diànyǐng</span>)
                                <br><small class="text-muted">Here, <span class="pinyin">le</span> comes after the result complement <span class="pinyin">wán</span> (finish).</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Extra: The Negative Form: 沒有 (méiyǒu)</h4>
                        <p class="mb-4 text-muted">To negate a completed action, you **must** use <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>) before the verb. When you use <span class="pinyin">méiyǒu</span>, the <span class="pinyin">le</span> **must be removed**.</p>
                        <ul class="space-y-4">
                            <li><strong>Correct (I didn't eat):</strong> <span class="hanzi" data-speak="我沒有吃">我沒有吃</span> (<span class="pinyin">wǒ méiyǒu chī</span>)</li>
                            <li><strong>Incorrect:</strong> <span class="pinyin">wǒ méiyǒu chī le</span> or <span class="pinyin">wǒ bù chī le</span> (this means "I'm not eating *anymore*").</li>
                            
                            <li><strong>Correct (He didn't buy it):</strong> <span class="hanzi" data-speak="他沒有買">他沒有買</span> (<span class="pinyin">tā méiyǒu mǎi</span>)</li>
                            <li><strong>Incorrect:</strong> <span class="pinyin">tā méiyǒu mǎi le</span></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Function 2: Change of State (情況的改變)</h4>
                        <p class="mb-4 text-muted">When placed at the *end of a sentence*, <span class="pinyin">le</span> indicates that a new situation has occurred or a state has changed. This is about "now".</p>
                        <ul class="space-y-4">
                            <li><strong>It's raining (now):</strong> <span class="hanzi" data-speak="下雨了">下雨了</span> (<span class="pinyin">xià yǔ le</span>)
                                <br><small class="text-muted">It wasn't raining before, but now it is. The situation has *changed*.</small></li>

                            <li><strong>I'm tired (now):</strong> <span class="hanzi" data-speak="我累了">我累了</span> (<span class="pinyin">wǒ lèi le</span>)
                                <br><small class="text-muted">I wasn't tired before, but now I am. My state has *changed*.</small></li>
                            
                            <li><strong>He got taller:</strong> <span class="hanzi" data-speak="他高了">他高了</span> (<span class="pinyin">tā gāo le</span>)
                                <br><small class="text-muted">His state has *changed* from shorter to taller.</small></li>
                            
                            <li><strong>Too expensive!:</strong> <span class="hanzi" data-speak="太貴了">太貴了！</span> (<span class="pinyin">tài guì le!</span>)
                                <br><small class="text-muted">I have *just realized* this new situation. This is a very common pattern.</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Extra: "Not Anymore" with 不...了 (bù...le)</h4>
                        <p class="mb-4 text-muted">To negate a "change of state," you use the pattern <span class="hanzi" data-speak="不...了">不...了</span> (<span class="pinyin">bù...le</span>). This combination means "not anymore."</p>
                        <ul class="space-y-4">
                            <li><strong>I don't eat:</strong> <span class="hanzi" data-speak="我不吃">我不吃</span> (<span class="pinyin">wǒ bù chī</span>) - (A general habit).</li>
                            <li><strong>I'm not eating anymore:</strong> <span class="hanzi" data-speak="我不吃了">我不吃了</span> (<span class="pinyin">wǒ bù chī le</span>) - (I was eating, but *now* I've stopped. A change of state).</li>
                            <li><strong>He doesn't live here anymore:</strong> <span class="hanzi" data-speak="他不住在這裡了">他不住在這裡了</span> (<span class="pinyin">tā bú zhù zài zhèlǐ le</span>).</li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Key Point: 了 (le) is NOT just "Past Tense"</h5>
                            <p class="text-sm">The concept of `了` is *completion*, not *time*. It can even be used for the future!</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-2">
                                <li><strong>Future Example:</strong> <span class="hanzi" data-speak="我明天吃了飯就去找你">我明天吃了飯就去找你</span>。
                                    <br>(<span class="pinyin">Wǒ míngtiān chī le fàn jiù qù zhǎo nǐ.</span>)
                                    <br>This means: "Tomorrow, after I *finish* eating, I will go find you." The action (`吃`) must be *completed* before the next action (`去找你`) can happen.</li>
                                <li><strong>Compare these two:</strong>
                                    <br>1. <span class="hanzi" data-speak="我學了中文">我學了中文</span> (<span class="pinyin">Wǒ xué le Zhōngwén</span>) - I studied Chinese. (A completed action, e.g., last night).
                                    <br>2. <span class="hanzi" data-speak="我學中文了">我學中文了</span> (<span class="pinyin">Wǒ xué Zhōngwén le</span>) - I have started studying Chinese. (A change of state: I didn't study it before, but *now I do*).</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson8"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson9"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson10"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <!-- END NEW Lesson 9 -->

                    <!-- MODIFIED: Full Content Added for Lesson 10 -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson10">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 10: Using 'guo' (過)</h3>
                        <p class="mb-5 text-muted leading-relaxed">While <span class="pinyin">le</span> (了) marks completion or change, <span class="hanzi" data-speak="過">過</span> (<span class="pinyin">guo</span>) is the **experiential particle**. You use it to talk about whether you have *ever* had an experience in the past. It's the equivalent of "have/has ever..."</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Positive Structure (肯定句)</h4>
                        <p class="mb-4 text-muted">You place <span class="pinyin">guo</span> directly after the verb to indicate the experience.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + Verb + 過 (guo) + Object</code></p>
                        <ul class="space-y-4">
                            <li><strong>I have been to Taiwan:</strong> <span class="hanzi" data-speak="我去過台灣">我去過台灣</span> (<span class="pinyin">wǒ qù guo Táiwān</span>)
                                <br><small class="text-muted">The experience of "going" has happened at least once.</small></li>

                            <li><strong>He has seen this movie:</strong> <span class="hanzi" data-speak="他看過這部電影">他看過這部電影</span> (<span class="pinyin">tā kàn guo zhè bù diànyǐng</span>)
                                <br><small class="text-muted">The experience of "seeing" this movie is complete.</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Negative Structure (否定句)</h4>
                        <p class="mb-4 text-muted">To say you have *never* had an experience, you use <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>) and keep the <span class="pinyin">guo</span>. (Note: This is different from <span class="pinyin">le</span>, which gets dropped).</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 沒有 (méiyǒu) + Verb + 過 (guo) + Object</code></p>
                        <ul class="space-y-4">
                            <li><strong>I have never eaten stinky tofu:</strong> <span class="hanzi" data-speak="我沒有吃過臭豆腐">我沒有吃過臭豆腐</span> (<span class="pinyin">wǒ méiyǒu chī guo chòu dòufu</span>)</li>
                            
                            <li><strong>She has not been to America:</strong> <span class="hanzi" data-speak="她沒有去過美國">她沒有去過美國</span> (<span class="pinyin">tā méiyǒu qù guo Měiguó</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Question Structures (疑問句)</h4>
                        <p class="mb-4 text-muted">You can ask about experiences in two common ways.</p>
                        <ul class="space-y-4">
                            <li><strong>Using <span class="pinyin">嗎 (ma)</span>:</strong> <span class="hanzi" data-speak="你吃過臭豆腐嗎">你吃過臭豆腐嗎？</span>
                                <br><span class="pinyin">(Nǐ chī guo chòu dòufu ma?)</span> - Have you ever eaten stinky tofu?</li>

                            <li><strong>Using "A-not-A" (<span class="pinyin">...guo...méiyǒu</span>):</strong> <span class="hanzi" data-speak="你吃過臭豆腐沒有">你吃過臭豆腐沒有？</span>
                                <br><span class="pinyin">(Nǐ chī guo chòu dòufu méiyǒu?)</span> - Have you ever eaten stinky tofu (or not)?</li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: 了 (le) vs. 過 (guo) — The Key Difference</h5>
                            <p class="text-sm mb-3">This is the most important part of this lesson. Both relate to the past, but in different ways.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><span class="pinyin">了 (le)</span> = **Completion.** It marks a *specific* action that was completed. The action is finished.
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我昨天吃了餃子">我昨天吃了餃子</span> (<span class="pinyin">Wǒ zuótiān chī le jiǎozi</span>)
                                    <br><small class="ml-4 text-muted">"I ate dumplings yesterday." (A specific, completed event. I'm telling you what I did.)</small></li>
                                
                                <li><span class="pinyin">過 (guo)</span> = **Experience.** It marks an action that has happened *at least once* in the past. It's about life experience, not a specific event.
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我吃過餃子">我吃過餃子</span> (<span class="pinyin">Wǒ chī guo jiǎozi</span>)
                                    <br><small class="ml-4 text-muted">"I have eaten dumplings (before)." (I have the experience. I know what they are. It's not about a specific meal.)</small></li>
                                
                                <li><strong>Compare:</strong>
                                    <br>1. <span class="hanzi" data-speak="他買了那本書">他買了那本書</span> (<span class="pinyin">Tā mǎi le nà běn shū</span>) - "He bought that book." (The action is complete. He has the book.)
                                    <br>2. <span class="hanzi" data-speak="他買過那本書">他買過那本書</span> (<span class="pinyin">Tā mǎi guo nà běn shū</span>) - "He has bought that book (before)." (He has the *experience* of buying it. Maybe he returned it, maybe he's buying it again. We are only talking about the experience.)</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson9"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson10"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson11"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <!-- END MODIFIED -->
                    <article class="content-page card p-6 mb-8" data-page-id="lesson11">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 11: Using 'zai' (在)</h3>
                        <p class="mb-5 text-muted leading-relaxed">The word <span class="hanzi" data-speak="在">在</span> (<span class="pinyin">zài</span>) is one of the most common and important words in Mandarin. It has three main uses: as a verb ("to be at"), as a preposition ("at/in/on"), and as a progressive marker to show an action is in progress (like "-ing" in English). We will use Traditional Chinese characters.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Function 1: "To be at" a Location (Verb)</h4>
                        <p class="mb-4 text-muted">Used as the main verb, <span class="pinyin">zài</span> simply states that someone or something *is at* a location.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 在 (zài) + Location</code></p>
                        <ul class="space-y-4">
                            <li><strong>I am at home:</strong> <span class="hanzi" data-speak="我在家">我在家</span> (<span class="pinyin">wǒ zài jiā</span>)</li>
                            <li><strong>He is at school:</strong> <span class="hanzi" data-speak="他在學校">他在學校</span> (<span class="pinyin">tā zài xuéxiào</span>)</li>
                            <li><strong>Negative (Not at):</strong> <span class="hanzi" data-speak="我不在家">我不在家</span> (<span class="pinyin">wǒ bú zài jiā</span>) - I am not at home. (Note the tone change on <span class="pinyin">bù</span>!)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Function 2: "At/In/On" a Location (Preposition)</h4>
                        <p class="mb-4 text-muted">This is a key difference from English: the location phrase <span class="pinyin">zài + Location</span> comes *before* the verb.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 在 (zài) + Location + Verb</code></p>
                        <ul class="space-y-4">
                            <li><strong>I eat at home:</strong> <span class="hanzi" data-speak="我在家吃飯">我在家吃飯</span> (<span class="pinyin">wǒ zài jiā chīfàn</span>)
                                <br><small class="text-muted">Literally: "I at home eat food."</small></li>
                            <li><strong>He works in Taipei:</strong> <span class="hanzi" data-speak="他在台北工作">他在台北工作</span> (<span class="pinyin">tā zài Táiběi gōngzuò</span>)
                                <br><small class="text-muted">Literally: "He in Taipei works."</small></li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Function 3: Action in Progress (like "-ing")</h4>
                        <p class="mb-4 text-muted">Placed before a verb, <span class="pinyin">zài</span> indicates that the action is currently happening. It's the equivalent of "am/is/are -ing".</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 在 (zài) + Verb (+ Object)</code></p>
                        <ul class="space-y-4">
                            <li><strong>I am eating:</strong> <span class="hanzi" data-speak="我在吃飯">我在吃飯</span> (<span class="pinyin">wǒ zài chīfàn</span>)
                                <br><small class="text-muted">Compare this to `wǒ zài jiā chīfàn` (I eat at home). Context is key!</small></li>
                            <li><strong>He is watching TV:</strong> <span class="hanzi" data-speak="他在看電視">他在看電視</span> (<span class="pinyin">tā zài kàn diànshì</span>)</li>
                            <li><strong>Negative (Not -ing):</strong> <span class="hanzi" data-speak="我沒有在吃飯">我沒有在吃飯</span> (<span class="pinyin">wǒ méiyǒu zài chīfàn</span>) - I am not (currently) eating.</li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Asking Questions with 在 (zài)</h4>
                         <ul class="space-y-4">
                            <li><strong>Q: Where are you?:</strong> <span class="hanzi" data-speak="你在哪裡">你在哪裡？</span> (<span class="pinyin">nǐ zài nǎlǐ?</span>)
                                <br><small class="text-muted">Answer: <span class="hanzi" data-speak="我在這裡">我在這裡</span> (<span class="pinyin">wǒ zài zhèlǐ</span>) - I am here.</small></li>
                            <li><strong>Q: Are you at home?:</strong> <span class="hanzi" data-speak="你在家嗎">你在家嗎？</span> (<span class="pinyin">nǐ zài jiā ma?</span>)
                                <br><small class="text-muted">Answer (Yes): <span class="hanzi" data-speak="在">在</span> (<span class="pinyin">zài</span>) or <span class="hanzi" data-speak="我在家">我在家</span> (<span class="pinyin">wǒ zài jiā</span>).</small>
                                <br><small class="text-muted">Answer (No): <span class="hanzi" data-speak="不在">不在</span> (<span class="pinyin">bú zài</span>).</small></li>
                            <li><strong>Q: Are you (currently) eating?:</strong> <span class="hanzi" data-speak="你在吃飯嗎">你在吃飯嗎？</span> (<span class="pinyin">nǐ zài chīfàn ma?</span>)
                                <br><small class="text-muted">Answer (Yes): <span class="hanzi" data-speak="在">在</span> (<span class="pinyin">zài</span>) or <span class="hanzi" data-speak="我在吃飯">我在吃飯</span> (<span class="pinyin">wǒ zài chīfàn</span>).</small>
                                <br><small class="text-muted">Answer (No): <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>) or <span class="hanzi" data-speak="沒有在吃">沒有在吃</span> (<span class="pinyin">méiyǒu zài chī</span>).</small></li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Key Comparison: 在 (zài) vs. 了 (le) vs. 過 (guo)</h5>
                            <p class="text-sm mb-3">Let's use "watch a movie" (<span class="hanzi" data-speak="看電影">看電影</span> / <span class="pinyin">kàn diànyǐng</span>) to see the difference.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><span class="pinyin">在 (zài)</span> = **Present/Ongoing.** The action is happening *right now*.
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我在看電影">我在看電影</span> (<span class="pinyin">Wǒ zài kàn diànyǐng</span>)
                                    <br><small class="ml-4 text-muted">"I **am watching** a movie."</small></li>
                                
                                <li><span class="pinyin">了 (le)</span> = **Completed.** A *specific* action was completed.
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我看完了電影">我看完了電影</span> (<span class="pinyin">Wǒ kàn wán le diànyǐng</span>)
                                    <br><small class="ml-4 text-muted">"I **finished watching** the movie." (The event is over).</small></li>
                                
                                <li><span class="pinyin">過 (guo)</span> = **Experienced.** You have had the experience *at least once* in your life.
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我看過這部電影">我看過這部電影</span> (<span class="pinyin">Wǒ kàn guo zhè bù diànyǐng</span>)
                                    <br><small class="ml-4 text-muted">"I **have seen** this movie (before)." (I have the experience of seeing it.)</small></li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson10"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson11"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson12"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson12">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 12: Dates & Time (日期與時間)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Telling dates and time in Mandarin is very logical. The main rule is to go from the largest unit to the smallest (Year > Month > Day > Time). All examples use Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Days of the Week (星期)</h4>
                        <p class="mb-4 text-muted">You just combine <span class="hanzi" data-speak="星期">星期</span> (<span class="pinyin">xīngqí</span>) with a number. The week starts on Monday.</p>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead><tr><th>English</th><th>Traditional Chinese</th><th>Pinyin</th></tr></thead>
                                <tbody>
                                    <tr><td>Monday</td><td><span class="hanzi" data-speak="星期一">星期一</span></td><td><span class="pinyin">xīngqí yī</span></td></tr>
                                    <tr><td>Tuesday</td><td><span class="hanzi" data-speak="星期二">星期二</span></td><td><span class="pinyin">xīngqí èr</span></td></tr>
                                    <tr><td>Wednesday</td><td><span class="hanzi" data-speak="星期三">星期三</span></td><td><span class="pinyin">xīngqí sān</span></td></tr>
                                    <tr><td>Thursday</td><td><span class="hanzi" data-speak="星期四">星期四</span></td><td><span class="pinyin">xīngqí sì</span></td></tr>
                                    <tr><td>Friday</td><td><span class="hanzi" data-speak="星期五">星期五</span></td><td><span class="pinyin">xīngqí wǔ</span></td></tr>
                                    <tr><td>Saturday</td><td><span class="hanzi" data-speak="星期六">星期六</span></td><td><span class="pinyin">xīngqí liù</span></td></tr>
                                    <tr><td>Sunday</td><td><span class="hanzi" data-speak="星期天">星期天</span> / <span class="hanzi" data-speak="星期日">星期日</span></td><td><span class="pinyin">xīngqí tiān / xīngqí rì</span></td></tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Months of the Year (月)</h4>
                        <p class="mb-4 text-muted">This is even easier. Just say the number (1-12) followed by <span class="hanzi" data-speak="月">月</span> (<span class="pinyin">yuè</span>).</p>
                        <ul class="space-y-2 text-sm">
                            <li><strong>January:</strong> <span class="hanzi" data-speak="一月">一月</span> (<span class="pinyin">yí yuè</span>)</li>
                            <li><strong>February:</strong> <span class="hanzi" data-speak="二月">二月</span> (<span class="pinyin">èr yuè</span>)</li>
                            <li><strong>...December:</strong> <span class="hanzi" data-speak="十二月">十二月</span> (<span class="pinyin">shí èr yuè</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Constructing Dates & Relative Days</h4>
                        <p class="mb-4 text-muted">Remember: Big to small. <span class="hanzi" data-speak="年">年</span> (<span class="pinyin">nián</span>) = Year, <span class="hanzi" data-speak="月">月</span> (<span class="pinyin">yuè</span>) = Month, <span class="hanzi" data-speak="日">日</span> (<span class="pinyin">rì</span>) / <span class="hanzi" data-speak="號">號</span> (<span class="pinyin">hào</span>) = Day. <span class="pinyin">hào</span> is more common in spoken Mandarin.</p>
                        <ul class="space-y-4">
                            <li><strong>Today:</strong> <span class="hanzi" data-speak="今天">今天</span> (<span class="pinyin">jīntiān</span>)</li>
                            <li><strong>Yesterday:</strong> <span class="hanzi" data-speak="昨天">昨天</span> (<span class="pinyin">zuótiān</span>)</li>
                            <li><strong>Tomorrow:</strong> <span class="hanzi" data-speak="明天">明天</span> (<span class="pinyin">míngtiān</span>)</li>
                            <li><strong>Example Date (Oct 30, 2025):</strong> <span class="hanzi" data-speak="二零二五年十月三十號">二零二五年十月三十號</span>
                                <br><small class="pinyin">(Èr líng èr wǔ nián, shí yuè, sān shí hào)</small>
                                <br><small class="text-muted">Note: The year is read as individual digits.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Telling Time (時間)</h4>
                        <p class="mb-4 text-muted">Use <span class="hanzi" data-speak="點">點</span> (<span class="pinyin">diǎn</span>) for "o'clock" and <span class="hanzi" data-speak="分">分</span> (<span class="pinyin">fēn</span>) for "minute".</p>
                        <ul class="space-y-4">
                            <li><strong>2 o'clock:</strong> <span class="hanzi" data-speak="兩點">兩點</span> (<span class="pinyin">liǎng diǎn</span>) - **Crucial:** Use <span class="hanzi" data-speak="兩">兩</span> (<span class="pinyin">liǎng</span>), not <span class="hanzi" data-speak="二">二</span> (<span class="pinyin">èr</span>) for "2 o'clock".</li>
                            <li><strong>3:10 (Ten past three):</strong> <span class="hanzi" data-speak="三點十分">三點十分</span> (<span class="pinyin">sān diǎn shí fēn</span>)</li>
                            <li><strong>4:30 (Half past four):</strong> <span class="hanzi" data-speak="四點半">四點半</span> (<span class="pinyin">sì diǎn bàn</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="半">半</span> (<span class="pinyin">bàn</span>) means "half".</small></li>
                            <li><strong>5:15 (A quarter past five):</strong> <span class="hanzi" data-speak="五點一刻">五點一刻</span> (<span class="pinyin">wǔ diǎn yí kè</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="刻">刻</span> (<span class="pinyin">kè</span>) means "quarter hour".</small></li>
                            <li><strong>Parts of the day:</strong>
                                <br><small class="text-muted"><strong>Morning:</strong> <span class="hanzi" data-speak="早上">早上</span> (<span class="pinyin">zǎoshang</span>) - e.g., <span class="hanzi" data-speak="早上八點">早上八點</span> (8:00 AM)</small>
                                <br><small class="text-muted"><strong>Afternoon:</strong> <span class="hanzi" data-speak="下午">下午</span> (<span class="pinyin">xiàwǔ</span>) - e.g., <span class="hanzi" data-speak="下午兩點">下午兩點</span> (2:00 PM)</small>
                                <br><small class="text-muted"><strong>Evening/Night:</strong> <span class="hanzi" data-speak="晚上">晚上</span> (<span class="pinyin">wǎnshang</span>) - e.g., <span class="hanzi" data-speak="晚上七點">晚上七點</span> (7:00 PM)</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Asking Questions</h4>
                        <ul class="space-y-4">
                            <li><strong>What time is it now?:</strong> <span class="hanzi" data-speak="現在幾點">現在幾點？</span> (<span class="pinyin">Xiànzài jǐ diǎn?</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="現在">現在</span> (<span class="pinyin">xiànzài</span>) = now. <span class="hanzi" data-speak="幾點">幾點</span> (<span class="pinyin">jǐ diǎn</span>) = what o'clock?</small></li>
                            <li><strong>What is the date today?:</strong> <span class="hanzi" data-speak="今天幾月幾號">今天幾月幾號？</span> (<span class="pinyin">Jīntiān jǐ yuè jǐ hào?</span>)
                                <br><small class="text-muted">Literally: "Today what month what day?"</small></li>
                            <li><strong>What day of the week is it?:</strong> <span class="hanzi" data-speak="今天星期幾">今天星期幾？</span> (<span class="pinyin">Jīntiān xīngqí jǐ?</span>)
                                <br><small class="text-muted">Literally: "Today week what number?"</small></li>
                        </ul>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson11"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson12"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson13"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson13">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 13: Measure Words (量詞)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Measure words (classifiers) are a major feature of Mandarin. In English, we use them for some nouns (e.g., "a *sheet* of paper," "a *cup* of tea"). In Mandarin, you must use a measure word *every time* you count a noun. You cannot say "one book"; you must say "one *[measure word for books]* book."</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">The Basic Structure</h4>
                        <p class="mb-4 text-muted">The measure word always goes between the number and the noun.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Number + Measure Word (MW) + Noun</code></p>
                        <ul class="space-y-4">
                            <li><strong>One person:</strong> <span class="hanzi" data-speak="一個人">一個人</span> (<span class="pinyin">yí ge rén</span>)
                                <br><small class="text-muted">Not <span class="pinyin">yī rén</span>. <span class="hanzi" data-speak="個">個</span> (<span class="pinyin">ge</span>) is the measure word.</small></li>
                            <li><strong>This person:</strong> <span class="hanzi" data-speak="這個人">這個人</span> (<span class="pinyin">zhè ge rén</span>)
                                <br><small class="text-muted">The rule also applies to "this" (<span class="hanzi" data-speak="這">這</span>, <span class="pinyin">zhè</span>) and "that" (<span class="hanzi" data-speak="那">那</span>, <span class="pinyin">nà</span>).</small></li>
                            <li><strong>How many people?:</strong> <span class="hanzi" data-speak="幾個人">幾個人？</span> (<span class="pinyin">jǐ ge rén?</span>)
                                <br><small class="text-muted">It's also used with "how many/a few" (<span class="hanzi" data-speak="幾">幾</span>, <span class="pinyin">jǐ</span>).</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Common Measure Words</h4>
                        <p class="mb-4 text-muted">Different nouns take different measure words. When in doubt, <span class="hanzi" data-speak="個">個</span> (<span class="pinyin">ge</span>) is the most common and often acceptable, but learning the correct one is best.</p>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>MW (Trad.)</th>
                                        <th>Pinyin</th>
                                        <th>Used For (Examples)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="hanzi" data-speak="個">個</span></td>
                                        <td><span class="pinyin">ge</span></td>
                                        <td>The "general" measure word. Used for people, abstract things, fruit, etc.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一個人">一個人</span> one person, <span class="hanzi" data-speak="三個蘋果">三個蘋果</span> three apples)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="杯">杯</span></td>
                                        <td><span class="pinyin">bēi</span></td>
                                        <td>"Cup" - for drinks.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一杯茶">一杯茶</span> one cup of tea, <span class="hanzi" data-speak="兩杯咖啡">兩杯咖啡</span> two cups of coffee)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="本">本</span></td>
                                        <td><span class="pinyin">běn</span></td>
                                        <td>For bound items like books, magazines.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一本書">一本書</span> one book)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="張">張</span></td>
                                        <td><span class="pinyin">zhāng</span></td>
                                        <td>For flat, paper-like objects.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一張桌子">一張桌子</span> one table, <span class="hanzi" data-speak="一張紙">一張紙</span> one sheet of paper, <span class="hanzi" data-speak="一張票">一張票</span> one ticket)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="位">位</span></td>
                                        <td><span class="pinyin">wèi</span></td>
                                        <td>Polite measure word for people.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一位老師">一位老師</span> one teacher, <span class="hanzi" data-speak="兩位客人">兩位客人</span> two guests)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="隻">隻</span></td>
                                        <td><span class="pinyin">zhī</span></td>
                                        <td>For most animals (cats, dogs, birds).
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一隻狗">一隻狗</span> one dog, <span class="hanzi" data-speak="三隻貓">三隻貓</span> three cats)</small></td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="條">條</span></td>
                                        <td><span class="pinyin">tiáo</span></td>
                                        <td>For long, thin, flexible objects.
                                            <br><small class->(e.g., <span class="hanzi" data-speak="一條魚">一條魚</span> one fish, <span class="hanzi" data-speak="一條褲子">一條褲子</span> one pair of pants, <span class="hanzi" data-speak="一條河">一條河</span> one river)</small></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Crucial Rule: 二 (èr) vs. 兩 (liǎng) Revisited</h5>
                            <p class="text-sm">In Lesson 4, we learned that <span class="pinyin">èr</span> is for counting and <span class="pinyin">liǎng</span> is for "two of something." This "something" is the measure word!</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-2">
                                <li>**You MUST use <span class="hanzi" data-speak="兩">兩</span> (<span class="pinyin">liǎng</span>) when you mean "two of [Noun]" with a measure word.**</li>
                                <li><strong>Correct:</strong> <span class="hanzi" data-speak="兩個人">兩個人</span> (<span class="pinyin">liǎng ge rén</span>) - Two people.</li>
                                <li><strong>Correct:</strong> <span class="hanzi" data-speak="兩本書">兩本書</span> (<span class="pinyin">liǎng běn shū</span>) - Two books.</li>
                                <li><strong>Correct:</strong> <span class="hanzi" data-speak="兩杯茶">兩杯茶</span> (<span class="pinyin">liǎng bēi chá</span>) - Two cups of tea.</li>
                                <li class="mt-2"><strong>Incorrect:</strong> <span class="pinyin">èr ge rén</span>, <span class="pinyin">èr běn shū</span>, <span class="pinyin">èr bēi chá</span>.</li>
                                <li class="mt-2">Use <span class="hanzi" data-speak="二">二</span> (<span class="pinyin">èr</span>) only when the "2" is part of a larger number (like 12, 20, 22).
                                    <br><small class="text-muted">e.g., <span class="hanzi" data-speak="十二個人">十二個人</span> (<span class="pinyin">shí èr ge rén</span>) - 12 people.</small>
                                    <br><small class="text-muted">e.g., <span class="hanzi" data-speak="二十二本書">二十二本書</span> (<span class="pinyin">èr shí èr běn shū</span>) - 22 books.</small>
                                </li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson12"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson13"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson14"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson14">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 14: 'De' Particles (的, 地, 得)</h3>
                        <p class="mb-5 text-muted leading-relaxed">This is one of the most confusing grammar points for learners. All three particles are pronounced <span class="pinyin">de</span> (neutral tone), but they have completely different grammatical roles. They act as "glue" to connect different parts of a sentence. We'll use Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">1. 的 (de) - The "Possessive / Adjective" Marker</h4>
                        <p class="mb-4 text-muted">This is the most common <span class="pinyin">de</span>. It links a noun/pronoun to another noun to show possession, or links an adjective to a noun it's describing.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure 1 (Possession): <code class="pinyin">Noun/Pronoun + 的 + Noun</code></p>
                        <ul class="space-y-4">
                            <li><strong>My book:</strong> <span class="hanzi" data-speak="我的書">我的書</span> (<span class="pinyin">wǒ de shū</span>)</li>
                            <li><strong>His teacher:</strong> <span class="hanzi" data-speak="他的老師">他的老師</span> (<span class="pinyin">tā de lǎoshī</span>)</li>
                        </ul>
                        <p class="mb-4 mt-4 text-sm font-semibold text-slate-700">Structure 2 (Adjective): <code class="pinyin">Adjective + 的 + Noun</code></p>
                        <ul class="space-y-4">
                            <li><strong>A red apple:</strong> <span class="hanzi" data-speak="紅色的蘋果">紅色的蘋果</span> (<span class="pinyin">hóngsè de píngguǒ</span>)</li>
                            <li><strong>A happy person:</strong> <span class="hanzi" data-speak="快樂的人">快樂的人</span> (<span class="pinyin">kuàilè de rén</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">2. 地 (de) - The "Adverb" Marker</h4>
                        <p class="mb-4 text-muted">This <span class="pinyin">de</span> is used to turn an adjective into an adverb, describing *how* an action is performed. It's the equivalent of adding "-ly" in English. It links an adjective to a verb.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Adjective + 地 + Verb</code></p>
                        <ul class="space-y-4">
                            <li><strong>To eat happily:</strong> <span class="hanzi" data-speak="快樂地吃">快樂地吃</span> (<span class="pinyin">kuàilè de chī</span>)
                                <br><small class="text-muted">How does he eat? Happily.</small></li>
                            <li><strong>To walk slowly:</strong> <span class="hanzi" data-speak="慢慢地走">慢慢地走</span> (<span class="pinyin">màn man de zǒu</span>)
                                <br><small class="text-muted">How does she walk? Slowly.</small></li>
                            <li><strong>Note:</strong> In modern Mandarin (especially spoken), it's very common to use <span class="hanzi" data-speak="的">的</span> instead of <span class="hanzi" data-speak="地">地</span> (e.g., <span class="hanzi" data-speak="快樂的吃">快樂的吃</span>). However, <span class="hanzi" data-speak="地">地</span> is correct for formal writing.</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">3. 得 (de) - The "Degree / Complement" Marker</h4>
                        <p class="mb-4 text-muted">This <span class="pinyin">de</span> is used to describe the *result, degree, or quality* of an action. It always comes *after* a verb.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Verb + 得 + Adverb/Description</code></p>
                        <ul class="space-y-4">
                            <li><strong>He runs fast:</strong> <span class="hanzi" data-speak="他跑得很快">他跑得很快</span> (<span class="pinyin">tā pǎo de hěn kuài</span>)
                                <br><small class="text-muted">"He runs" (他跑) + "to a degree that is very fast" (得很快).</small></li>
                            <li><strong>She sings well:</strong> <span class="hanzi" data-speak="她唱得很好">她唱得很好</span> (<span class="pinyin">tā chàng de hěn hǎo</span>)
                                <br><small class="text-muted">"She sings" (她唱) + "to a degree that is very good" (得很好).</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Tricky Rule: Using 得 (de) with an Object</h4>
                        <p class="mb-4 text-muted">If the verb has an object (like "speak Chinese"), you must repeat the verb.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + Verb + Object, Verb + 得 + Description</code></p>
                        <ul class="space-y-4">
                            <li><strong>He speaks Chinese well:</strong> <span class="hanzi" data-speak="他說中文說得很好">他說中文，說得很好</span> (<span class="pinyin">tā shuō Zhōngwén, shuō de hěn hǎo</span>)
                                <br><small class="text-muted">Literally: "He speaks Chinese, speaks to a degree that is very good."</small></li>
                            <li><strong>Alternative:</strong> You can also move the object to the front.
                                <br><small class="hanzi" data-speak="中文他說得很好">中文他說得很好</span> (<span class="pinyin">Zhōngwén tā shuō de hěn hǎo</span>) - "Chinese, he speaks very well."</small></li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Quick Comparison: 的, 地, 得</h5>
                            <p class="text-sm">Use the word "happy" (<span class="hanzi" data-speak="快樂">快樂</span> / <span class="pinyin">kuàilè</span>) as a test.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><span class="pinyin">的 (de)</span> modifies the **Noun**:
                                    <br><strong class="ml-4"><span class="hanzi" data-speak="快樂的人">快樂的</span>人</span> (<span class="pinyin">kuàilè de rén</span>) = a happy **person** (What kind of person?)</li>
                                
                                <li><span class="pinyin">地 (de)</span> modifies the **Verb**:
                                    <br><strong class="ml-4"><span class="hanzi" data-speak="快樂地吃">快樂地</span>吃</span> (<span class="pinyin">kuàilè de chī</span>) = to **eat** happily (How do you eat?)</li>
                                
                                <li><span class="pinyin">得 (de)</span> describes the **Verb**:
                                    <br><strong class="ml-4"><span class="hanzi" data-speak="吃得快樂">吃得</span>快樂</span> (<span class="pinyin">chī de kuàilè</span>) = to eat **happily** (How is the eating? It is happy.)</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson13"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson14"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson15"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson15">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 15: Comparisons (比, 跟)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Learning to compare things is essential. Mandarin has a few simple structures for this. The main words to learn are <span class="hanzi" data-speak="比">比</span> (<span class="pinyin">bǐ</span>, "compared to"), <span class="hanzi" data-speak="跟">跟</span> (<span class="pinyin">gēn</span>, "with"), <span class="hanzi" data-speak="一樣">一樣</span> (<span class="pinyin">yíyàng</span>, "same"), and <span class="hanzi" data-speak="最">最</span> (<span class="pinyin">zuì</span>, "most"). We'll use Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">1. Comparative with 比 (bǐ) - "A is more [Adj] than B"</h4>
                        <p class="mb-4 text-muted">This is the most common way to say something is "more... than..." The structure is simple and direct.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">A + 比 (bǐ) + B + Adjective</code></p>
                        <ul class="space-y-4">
                            <li><strong>I am taller than you:</strong> <span class="hanzi" data-speak="我比你高">我比你高</span> (<span class="pinyin">wǒ bǐ nǐ gāo</span>)
                                <br><small class="text-muted">Literally: "I compare you tall."</small></li>
                            <li><strong>Taipei is bigger than Hualien:</strong> <span class="hanzi" data-speak="台北比花蓮大">台北比花蓮大</span> (<span class="pinyin">Táiběi bǐ Huālián dà</span>)</li>
                            <li><strong>This is more expensive than that:</strong> <span class="hanzi" data-speak="這個比那個貴">這個比那個貴</span> (<span class="pinyin">zhège bǐ nàge guì</span>)</li>
                            <li><strong>Note:</strong> You CANNOT use <span class="hanzi" data-speak="很">很</span> (<span class="pinyin">hěn</span>) with <span class="hanzi" data-speak="比">比</span>.
                                <br><small class="text-muted"><strong>Incorrect:</strong> <span class="pinyin">wǒ bǐ nǐ hěn gāo</span>.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">2. "The same as" with 跟 (gēn)...一樣 (yíyàng)</h4>
                        <p class="mb-4 text-muted">To say two things are equal or the same, you use this "with... same" structure.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">A + 跟 (gēn) + B + 一樣 (yíyàng) + (Adjective)</code></p>
                        <ul class="space-y-4">
                            <li><strong>I am the same height as you:</strong> <span class="hanzi" data-speak="我跟你一樣高">我跟你一樣高</span> (<span class="pinyin">wǒ gēn nǐ yíyàng gāo</span>)
                                <br><small class="text-muted">Literally: "I with you same tall."</small></li>
                            <li><strong>This book is the same as that one:</strong> <span class="hanzi" data-speak="這本書跟那本書一樣">這本書跟那本書一樣</span> (<span class="pinyin">zhè běn shū gēn nà běn shū yíyàng</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">3. Superlative with 最 (zuì) - "The most"</h4>
                        <p class="mb-4 text-muted">To say something is the "most" (e.g., biggest, fastest, best), you just put <span class="hanzi" data-speak="最">最</span> (<span class="pinyin">zuì</span>) before the adjective.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 最 (zuì) + Adjective</code></p>
                        <ul class="space-y-4">
                            <li><strong>He is the tallest:</strong> <span class="hanzi" data-speak="他最高">他最高</span> (<span class="pinyin">tā zuì gāo</span>)</li>
                            <li><strong>This is the best:</strong> <span class="hanzi" data-speak="這個最好">這個最好</span> (<span class="pinyin">zhège zuì hǎo</span>)</li>
                            <li><strong>Which do you like most?:</strong> <span class="hanzi" data-speak="你最喜歡哪一個">你最喜歡哪一個？</span> (<span class="pinyin">nǐ zuì xǐhuan nǎ yí ge?</span>)</li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: Negative Comparisons</h5>
                            <p class="text-sm mb-3">How to say "A is not as... as B" and "A is not the same as B".</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>"Not as... as" with <span class="pinyin">沒有 (méiyǒu)</span>:</strong> This is the negative of <span class="pinyin">比 (bǐ)</span>.
                                    <br><strong class="ml-4">Structure:</strong> <code class="pinyin">A + 沒有 (méiyǒu) + B + (這麼/那麼) + Adjective</code>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我沒有你高">我沒有你高</span> (<span class="pinyin">wǒ méiyǒu nǐ gāo</span>)
                                    <br><small class="ml-4 text-muted">"I am not as tall as you." (Literally: "I don't have your tallness.")</small>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="花蓮沒有台北那麼大">花蓮沒有台北那麼大</span> (<span class="pinyin">Huālián méiyǒu Táiběi nàme dà</span>)
                                    <br><small class="ml-4 text-muted">"Hualien is not as big as Taipei." (<span class="pinyin">nàme</span> "that" / "so" is often added).</small></li>
                                
                                <li><strong>"Not the same as" with <span class="pinyin">不一樣 (bù yíyàng)</span>:</strong> This is the negative of <span class="pinyin">跟...一樣</span>.
                                    <br><strong class="ml-4">Structure:</strong> <code class="pinyin">A + 跟 + B + 不一樣 + (Adjective)</code>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我跟你不一樣高">我跟你不一樣高</span> (<span class="pinyin">wǒ gēn nǐ bù yíyàng gāo</span>)
                                    <br><small class="ml-4 text-muted">"My height and your height are not the same."</Setting></li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson14"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson15"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson16"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson16">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 16: 'Ba' Sentence (把句子)</h3>
                        <p class="mb-5 text-muted leading-relaxed">The <span class="hanzi" data-speak="把">把</span> (<span class="pinyin">bǎ</span>) sentence is a key structure in Mandarin that emphasizes what happens to an object. It's often called the "disposal" structure because it describes how someone "handles" or "disposes of" something. It moves the object to *before* the verb.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">The Basic Structure</h4>
                        <p class="mb-4 text-muted">The normal structure is Subject-Verb-Object (e.g., <span class="hanzi" data-speak="我吃飯">我吃飯</span>). The <span class="pinyin">bǎ</span> structure changes this, and the verb **must** be followed by a complement (like <span class="pinyin">le</span>, <span class="pinyin">wán</span>, <span class="pinyin">zài</span>, etc.).</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 把 (bǎ) + Object + Verb + Complement/Result</code></p>
                        <ul class="space-y-4">
                            <li><strong>I ate the food. (I finished it):</strong> <span class="hanzi" data-speak="我把飯吃完了">我把飯吃完了</span> (<span class="pinyin">wǒ bǎ fàn chī wán le</span>)
                                <br><small class="text-muted">Literally: "I `bǎ` food eat-finished." This implies *the* food (a specific, definite object) is now gone.</small></li>
                            <li><strong>He closed the door:</strong> <span class="hanzi" data-speak="他把門關上了">他把門關上了</span> (<span class="pinyin">tā bǎ mén guān shàng le</span>)
                                <br><small class="text-muted">Literally: "He `bǎ` door close-up." The action is done *to* the door.</small></li>
                            <li><strong>Please put the book here:</strong> <span class="hanzi" data-speak="請你把書放在這裡">請你把書放在這裡</span> (<span class="pinyin">qǐng nǐ bǎ shū fàng zài zhèlǐ</span>)
                                <br><small class="text-muted">Literally: "Please you `bǎ` book place at here." The book is being "disposed of" to a new location.</small></li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Negative Structures</h4>
                        <p class="mb-4 text-muted">You negate a <span class="pinyin">bǎ</span> sentence by placing <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>) or <span class="hanzi" data-speak="不要">不要</span> (<span class="pinyin">bú yào</span>) *before* the <span class="pinyin">bǎ</span>.</p>
                        <ul class="space-y-4">
                            <li><strong>I didn't finish the food:</strong> <span class="hanzi" data-speak="我沒有把飯吃完">我沒有把飯吃完</span> (<span class="pinyin">wǒ méiyǒu bǎ fàn chī wán</span>)
                                <br><small class="text-muted">Note: The <span class="pinyin">le</span> is dropped, just like with other <span class="pinyin">méiyǒu</span> sentences.</small></li>
                            <li><strong>Don't close the door!:</strong> <span class="hanzi" data-speak="不要把門關上">不要把門關上！</span> (<span class="pinyin">bú yào bǎ mén guān shàng!</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Standard Sentence vs. 把 (bǎ) Sentence</h4>
                        <p class="mb-4 text-muted">Using <span class="pinyin">bǎ</span> adds emphasis on the *result* of the action on the object. It highlights the "disposal" of the object.</p>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Meaning</th>
                                        <th>Standard (SVO)</th>
                                        <th>把 (bǎ) Sentence (Emphasis on result)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>I finished eating the food.</td>
                                        <td><span class="hanzi" data-speak="我吃完飯了">我吃完飯了</span><br>(<span class="pinyin">wǒ chī wán fàn le</span>)</td>
                                        <td><span class="hanzi" data-speak="我把飯吃完了">我把飯吃完了</span><br>(<span class="pinyin">wǒ bǎ fàn chī wán le</span>)</td>
                                    </tr>
                                    <tr>
                                        <td>He gave the book to me.</td>
                                        <td><span class="hanzi" data-speak="他給了我那本書">他給了我那本書</span><br>(<span class="pinyin">tā gěi le wǒ nà běn shū</span>)</td>
                                        <td><span class="hanzi" data-speak="他把那本書給了我">他把那本書給了我</span><br>(<span class="pinyin">tā bǎ nà běn shū gěi le wǒ</span>)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Extra: Using 把...給... (bǎ...gěi...)</h4>
                        <p class="mb-4 text-muted"><span class="hanzi" data-speak="給">給</span> (<span class="pinyin">gěi</span>) is often used in <span class="pinyin">bǎ</span> sentences. It can act as a complement "to give," or sometimes just as an extra particle to add emphasis to the verb (common in Taiwan).</p>
                        <ul class="space-y-4">
                            <li><strong>As "to give":</strong> <span class="hanzi" data-speak="他把錢給了我">他把錢給了我</span> (<span class="pinyin">tā bǎ qián gěi le wǒ</span>)
                                <br><small class="text-muted">"He `bǎ` money gave to me." (Here `gěi` is the main verb complement).</small></li>
                            <li><strong>As emphasis (optional):</strong> <span class="hanzi" data-speak="你把門關上">你把門關上</span> (<span class="pinyin">nǐ bǎ mén guān shàng</span>)
                                <br><small class="text-muted">Can also be said: <span class="hanzi" data-speak="你把門給關上">你把門給關上</span> (<span class="pinyin">nǐ bǎ mén gěi guān shàng</span>). The meaning is the same, but <span class="pinyin">gěi</span> adds a bit of force.</small></li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Crucial Rules for Using 把 (bǎ)</h5>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>1. The Object must be "Definite".</strong> The object must be something specific and known to both speakers (e.g., "that" book, "the" food, "my" keys), not "a" book.
                                    <br><small class="text-muted">Ex: <span class="hanzi" data-speak="我把那本書看完了">我把那本書看完了</span> (I finished reading *that* book).</small></li>
                                
                                <li><strong>2. The Verb MUST have a Complement.</strong> You can't just say <span class="hanzi" data-speak="我把飯吃">我把飯吃</span> (<span class="pinyin">wǒ bǎ fàn chī</span>). This is grammatically incomplete. The verb needs a result.
                                    <br><small class="text-muted"><strong>Correct:</strong> <span class="hanzi" data-speak="我把飯吃了">我把飯吃了</span> (chī le - *completion*)</small>
                                    <br><small class="text-muted"><strong>Correct:</strong> <span class="hanzi" data-speak="我把飯吃完">我把飯吃完</span> (chī wán - *finished*)</small>
                                    <br><small class="text-muted"><strong>Correct:</strong> <span class="hanzi" data-speak="我把書放在桌上">我把書放在桌上</span> (fàng zài zhuō shàng - *placed at a location*)</small></li>
                                
                                <li><strong>3. Don't use with "State" Verbs.</strong> You can't use <span class="pinyin">bǎ</span> with verbs like <span class="hanzi" data-speak="是">是</span> (<span class="pinyin">shì</span>), <span class="hanzi" data-speak="有">有</span> (<span class="pinyin">yǒu</span>), <span class="hanzi" data-speak="喜歡">喜歡</span> (<span class="pinyin">xǐhuan</span>), <span class="hanzi" data-speak="知道">知道</span> (<span class="pinyin">zhīdào</span>), etc.</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson15"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson16"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson17"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                </section>
                <!-- END Level 2 -->

                <!-- NEW: Level 3 Placeholders -->
                <section id="level3" class="content-page-container">
                    <article class="content-page card p-6 mb-8" data-page-id="lesson17">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 17: Result Complements (結果補語)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Result Complements are words placed directly after a verb to show the *result* or *outcome* of that action. This is a crucial concept in Mandarin that replaces many adverbs or separate verbs in English. Using them makes your Chinese sound much more natural.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">The Basic Structure</h4>
                        <p class="mb-4 text-muted">The complement is "glued" to the verb, acting as a single unit. If you use <span class="pinyin">le</span> (了), it comes *after* the complement.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + Verb + Complement + (了/le) + (Object)</code></p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Common Result Complements</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Complement</th>
                                        <th>Pinyin</th>
                                        <th>Meaning</th>
                                        <th>Example (Traditional Chinese, Pinyin, English)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="hanzi" data-speak="完">完</span></td>
                                        <td><span class="pinyin">wán</span></td>
                                        <td>"finish" (completion of the action)</td>
                                        <td><span class="hanzi" data-speak="我吃完了">我吃完了。</span> (<span class="pinyin">Wǒ chī wán le.</span>) - I finished eating.
                                        <br><span class="hanzi" data-speak="你做完功課了嗎">你做完功課了嗎？</span> (<span class="pinyin">Nǐ zuò wán gōngkè le ma?</span>) - Did you finish (doing) your homework?</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="到">到</span></td>
                                        <td><span class="pinyin">dào</span></td>
                                        <td>"arrive" (succeeding in or reaching the goal)</td>
                                        <td><span class="hanzi" data-speak="我找到了">我找到了！</span> (<span class="pinyin">Wǒ zhǎo dào le!</span>) - I found it! (I "searched-to-arrival")
                                        <br><span class="hanzi" data-speak="你買到票了嗎">你買到票了嗎？</span> (<span class="pinyin">Nǐ mǎi dào piào le ma?</span>) - Did you succeed in buying the tickets?</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="見">見</span></td>
                                        <td><span class="pinyin">jiàn</span></td>
                                        <td>"perceive" (result of seeing or hearing)</td>
                                        <td><span class="hanzi" data-speak="我看見他了">我看見他了。</span> (<span class="pinyin">Wǒ kàn jiàn tā le.</span>) - I saw him. ("I looked-and-perceived him")
                                        <br><span class="hanzi" data-speak="你聽見了嗎">你聽見了嗎？</span> (<span class="pinyin">Nǐ tīng jiàn le ma?</span>) - Did you hear that? ("Did you listen-and-perceive it?")</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="懂">懂</span></td>
                                        <td><span class="pinyin">dǒng</span></td>
                                        <td>"understand" (result of listening or reading)</td>
                                        <td><span class="hanzi" data-speak="我聽懂了">我聽懂了。</span> (<span class="pinyin">Wǒ tīng dǒng le.</span>) - I understood. ("I listened-and-understood")
                                        <br><span class="hanzi" data-speak="你聽得懂嗎">你聽得懂嗎？</span> (<span class="pinyin">Nǐ tīng de dǒng ma?</span>) - Can you understand (what you're hearing)? (See 'Potential Form' below)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="好">好</span></td>
                                        <td><span class="pinyin">hǎo</span></td>
                                        <td>"well" or "properly" (action is finished well)</td>
                                        <td><span class="hanzi" data-speak="飯做好了">飯做好了。</span> (<span class="pinyin">Fàn zuò hǎo le.</span>) - The food is ready. ("The food is cooked-well")
                                        <br><span class="hanzi" data-speak="準備好了嗎">準備好了嗎？</span> (<span class="pinyin">Zhǔnbèi hǎo le ma?</span>) - Are you ready? ("Prepared-well?")</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="錯">錯</span></td>
                                        <td><span class="pinyin">cuò</span></td>
                                        <td>"wrong" (action done incorrectly)</td>
                                        <td><span class="hanzi" data-speak="你說錯了">你說錯了。</span> (<span class="pinyin">Nǐ shuō cuò le.</span>) - You spoke incorrectly.
                                        <br><span class="hanzi" data-speak="我寫錯了">我寫錯了。</span> (<span class="pinyin">Wǒ xiě cuò le.</span>) - I wrote it wrong.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Negative Forms</h4>
                        <p class="mb-4 text-muted">To negate a *past* action with a result complement, use <span class="hanzi" data-speak="沒有">沒有</span> (<span class="pinyin">méiyǒu</span>). The <span class="pinyin">le</span> is dropped.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Structure: <code class="pinyin">Subject + 沒有 (méiyǒu) + Verb + Complement + (Object)</code></p>
                        <ul class="space-y-4">
                            <li><strong>I didn't finish eating:</strong> <span class="hanzi" data-speak="我沒有吃完">我沒有吃完。</span> (<span class="pinyin">Wǒ méiyǒu chī wán.</span>)</li>
                            <li><strong>I didn't find it:</strong> <span class="hanzi" data-speak="我沒有找到">我沒有找到。</span> (<span class="pinyin">Wǒ méiyǒu zhǎo dào.</span>)</li>
                            <li><strong>I didn't hear it:</strong> <span class="hanzi" data-speak="我沒有聽見">我沒有聽見。</span> (<span class="pinyin">Wǒ méiyǒu tīng jiàn.</span>)</li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: Potential Complements (Can / Can't)</h5>
                            <p class="text-sm mb-3">This is an advanced but related topic. To say you *can* or *cannot* achieve a result, you insert <span class="hanzi" data-speak="得">得</span> (<span class="pinyin">de</span>) or <span class="hanzi" data-speak="不">不</span> (<span class="pinyin">bù</span>) between the verb and the complement. This describes *potential*.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>Can (Affirmative):</strong> <code class="pinyin">Verb + 得 (de) + Complement</code>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我聽得懂">我聽得懂</span> (<span class="pinyin">wǒ tīng de dǒng</span>)
                                    <br><small class="ml-4 text-muted">"I can understand (what I am hearing)." (I "listen-get-understand")</small>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="你看得見嗎">你看得見嗎？</span> (<span class="pinyin">nǐ kàn de jiàn ma?</span>)
                                    <br><small class="ml-4 text-muted">"Can you see it?" (Are you "look-get-perceive"?)</small></li>
                                
                                <li><strong>Can't (Negative):</strong> <code class="pinyin">Verb + 不 (bù) + Complement</code>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我聽不懂">我聽不懂</span> (<span class="pinyin">wǒ tīng bù dǒng</span>)
                                    <br><small class="ml-4 text-muted">"I can't understand (what I am hearing)." (I "listen-not-understand")</small>
                                    <br><strong class="ml-4">Ex:</strong> <span class="hanzi" data-speak="我看不見">我看不見</span> (<span class="pinyin">wǒ kàn bù jiàn</span>)
                                    <br><small class="ml-4 text-muted">"I can't see it." (I "look-not-perceive")</small></li>
                                
                                <li><strong>Note:</strong> The most common potential form you'll hear is <span class="hanzi" data-speak="聽不懂">聽不懂</span> (<span class="pinyin">tīng bù dǒng</span>) - "I don't understand."</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson16"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson17"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson18"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson18">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 18: Directional Complements (方向補語)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Directional Complements are a special type of result complement. They are verbs that attach to *other verbs* to show the direction of the action. The two most important are <span class="hanzi" data-speak="來">來</span> (<span class="pinyin">lái</span>) "come" and <span class="hanzi" data-speak="去">去</span> (<span class="pinyin">qù</span>) "go".</p>
                        <p class="mb-5 text-muted leading-relaxed">The rule is simple: use <span class="hanzi" data-speak="來">來</span> (<span class="pinyin">lái</span>) if the action moves **towards** the speaker. Use <span class="hanzi" data-speak="去">去</span> (<span class="pinyin">qù</span>) if the action moves **away** from the speaker.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Simple Directional Complements (Verb + 來/去)</h4>
                        <p class="mb-4 text-muted">You combine a verb of motion (like `up`, `down`, `in`, `out`) with `來` or `去`.</p>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Verb (Trad.)</th>
                                        <th>Pinyin</th>
                                        <th>Meaning</th>
                                        <th>+ 來 (lái) - Towards Speaker</th>
                                        <th>+ 去 (qù) - Away from Speaker</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><span class="hanzi" data-speak="上">上</span></td>
                                        <td><span class="pinyin">shàng</span></td>
                                        <td>up</td>
                                        <td><span class="hanzi" data-speak="上來">上來</span> (come up)</td>
                                        <td><span class="hanzi" data-speak="上去">上去</span> (go up)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="下">下</span></td>
                                        <td><span class="pinyin">xià</span></td>
                                        <td>down</td>
                                        <td><span class="hanzi" data-speak="下來">下來</span> (come down)</td>
                                        <td><span class="hanzi" data-speak="下去">下去</span> (go down)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="進">進</span></td>
                                        <td><span class="pinyin">jìn</span></td>
                                        <td>in</td>
                                        <td><span class="hanzi" data-speak="進來">進來</span> (come in)</td>
                                        <td><span class="hanzi" data-speak="進去">進去</span> (go in)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="出">出</span></td>
                                        <td><span class="pinyin">chū</span></td>
                                        <td>out</td>
                                        <td><span class="hanzi" data-speak="出來">出來</span> (come out)</td>
                                        <td><span class="hanzi" data-speak="出去">出去</span> (go out)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="回">回</span></td>
                                        <td><span class="pinyin">huí</span></td>
                                        <td>return</td>
                                        <td><span class="hanzi" data-speak="回來">回來</span> (come back)</td>
                                        <td><span class="hanzi" data-speak="回去">回去</span> (go back)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="過">過</span></td>
                                        <td><span class="pinyin">guò</span></td>
                                        <td>over</td>
                                        <td><span class="hanzi" data-speak="過來">過來</span> (come over)</td>
                                        <td><span class="hanzi" data-speak="過去">過去</span> (go over)</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="起">起</span></td>
                                        <td><span class="pinyin">qǐ</span></td>
                                        <td>up</td>
                                        <td><span class="hanzi" data-speak="起來">起來</span> (get up)</td>
                                        <td>(not used)</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Object Placement (Very Important)</h4>
                        <p class="mb-4 text-muted">Where you put the noun (object) is tricky. There are two rules.</p>
                        <p class="mb-4 text-sm font-semibold text-slate-700">Rule 1: If the object is a **Location**, it MUST go *between* the Verb and 來/去.</p>
                        <ul class="space-y-4">
                            <li><strong>He went upstairs:</strong> <span class="hanzi" data-speak="他上樓去了">他上樓去了。</span> (<span class="pinyin">Tā shàng lóu qù le.</span>)
                                <br><small class="text-muted">Verb: `上` (shàng), Object: `樓` (lóu), Direction: `去` (qù). **Cannot be** `他上去樓了`.</small></li>
                            <li><strong>Please come back home:</strong> <span class="hanzi" data-speak="請你回家來">請你回家來。</span> (<span class="pinyin">Qǐng nǐ huí jiā lái.</span>)
                                <br><small class="text-muted">Verb: `回` (huí), Object: `家` (jiā), Direction: `來` (lái). **Cannot be** `請你回來家`.</small></li>
                        </ul>
                        
                        <p class="mb-4 mt-6 text-sm font-semibold text-slate-700">Rule 2: If the object is a **normal noun** (a thing), it can go *before* OR *after* 來/去.</p>
                        <ul class="space-y-4">
                            <li><strong>He brought a book (over here):</strong>
                                <br><small class="text-muted">Option 1 (Common): <span class="hanzi" data-speak="他帶了一本書來">他帶了一本書來。</span> (<span class="pinyin">Tā dài le yì běn shū lái.</span>)</small>
                                <br><small class="text-muted">Option 2 (Also correct): <span class="hanzi" data-speak="他帶來了一本書">他帶來了一本書。</span> (<span class="pinyin">Tā dài lái le yì běn shū.</span>)</small></li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">More Extra Contents: Abstract Meanings</h5>
                            <p class="text-sm mb-3">The real power of directional complements is their *abstract* or *metaphorical* use. They add shades of meaning to verbs that are not about physical direction.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><span class="pinyin">起來 (qǐlái)</span>:
                                    <br>1. **To begin an action:** <span class="hanzi" data-speak="他們唱起來了">他們唱起來了。</span> (<span class="pinyin">Tāmen chàng qǐlái le.</span>) "They started to sing."
                                    <br>2. **To recall:** <span class="hanzi" data-speak="我想起來了">我想起來了！</span> (<span class="pinyin">Wǒ xiǎng qǐlái le!</span>) "I remember now!"
                                    <br>3. **"When it comes to..." / "Seems...":** <span class="hanzi" data-speak="這看起來很好吃">這看起來很好吃。</span> (<span class="pinyin">Zhè kàn qǐlái hěn hǎochī.</span>) "This looks delicious." (Also: `聽起來` tīng qǐlái - sounds like, `吃起來` chī qǐlái - tastes like).</li>
                                
                                <li><span class="pinyin">下去 (xiàqù)</span>:
                                    <br>1. **Continuation into the future:** <span class="hanzi" data-speak="請你說下去">請你說下去。</span> (<span class="pinyin">Qǐng nǐ shuō xiàqù.</span>) "Please continue speaking."
                                    <br>2. <span class="hanzi" data-speak="你不能再這樣做下去了">你不能再這樣做下去了。</span> (<span class="pinyin">Nǐ bùnéng zài zhèyàng zuò xiàqù le.</span>) "You can't keep doing it like this."</li>
                                
                                <li><span class="pinyin">下來 (xiàlái)</span>:
                                    <br>1. **To stop or settle:** <span class="hanzi" data-speak="車停下來了">車停下來了。</span> (<span class="pinyin">Chē tíng xiàlái le.</span>) "The car stopped."
                                    <br>2. **To hand down (past to present):** <span class="hanzi" data-speak="這是祖先傳下來的">這是祖先傳下來的。</span> (<span class="pinyin">Zhè shì zǔxiān chuán xiàlái de.</span>) "This was passed down from our ancestors."</li>

                                <li><span class="pinyin">出來 (chūlái)</span>:
                                    <br>1. **To reveal or produce (from hidden to visible):** <span class="hanzi" data-speak="我想出一個辦法了">我想出一個辦法了。</span> (<span class="pinyin">Wǒ xiǎng chū yí ge bànfǎ le.</span>) "I thought of a solution."
                                    <br>2. **To recognize:** <span class="hanzi" data-speak="我認出他了">我認出他了。</span> (<span class="pinyin">Wǒ rèn chū tā le.</span>) "I recognized him."</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson17"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson18"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson19"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson19">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 19: Hobbies & Social (興趣愛好與社交)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Learning to talk about your hobbies and make plans is a great way to connect with people. This lesson covers key vocabulary and phrases for socializing in Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Asking About Hobbies (問愛好)</h4>
                        <ul class="space-y-4">
                            <li><strong>Formal Q: What are your hobbies?:</strong> <span class="hanzi" data-speak="你有什麼愛好">你有什麼愛好？</span> (<span class="pinyin">Nǐ yǒu shénme àihào?</span>)
                                <br><small class="text-muted">"You have what hobbies?"</small></li>
                            <li><strong>Formal A: My hobby is...:</strong> <span class="hanzi" data-speak="我的愛好是">我的愛好是...</span> (<span class="pinyin">Wǒ de àihào shì...</span>)
                                <br><small class="text-muted">e.g., <span class="hanzi" data-speak="我的愛好是看書">我的愛好是看書</span> (My hobby is reading).</small></li>
                            <li><strong>Common Q: What do you like to do?:</strong> <span class="hanzi" data-speak="你喜歡做什麼">你喜歡做什麼？</span> (<span class="pinyin">Nǐ xǐhuan zuò shénme?</span>)</li>
                            <li><strong>Common A: I like...:</strong> <span class="hanzi" data-speak="我喜歡">我喜歡...</span> (<span class="pinyin">Wǒ xǐhuan...</span>)
                                <br><small class="text-muted">e.g., <span class="hanzi" data-speak="我喜歡看電影">我喜歡看電影</span> (I like to watch movies).</small></li>
                        </ul>

                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: 愛好 (àihào) vs. 喜歡 (xǐhuan)</h5>
                            <p class="text-sm mb-3"><span class="hanzi" data-speak="愛好">愛好</span> (<span class="pinyin">àihào</span>) is a noun ("a hobby"). It's a bit formal, like something you'd write on a form. <span class="hanzi" data-speak="喜歡">喜歡</span> (<span class="pinyin">xǐhuan</span>) is a verb ("to like"). In daily conversation, it's much more natural to ask what someone *likes to do* (<span class="hanzi" data-speak="喜歡做什麼">喜歡做什麼</span>) than what their *hobbies are* (<span class="hanzi" data-speak="有什麼愛好">有什麼愛好</span>).</p>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Common Hobbies (常見的愛好)</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead><tr><th>English</th><th>Traditional Chinese</th><th>Pinyin</th></tr></thead>
                                <tbody>
                                    <tr><td>Reading</td><td><span class="hanzi" data-speak="看書">看書</span></td><td><span class="pinyin">kànshū</span> (Lit: "read book")</td></tr>
                                    <tr><td>Watching movies</td><td><span class="hanzi" data-speak="看電影">看電影</span></td><td><span class="pinyin">kàn diànyǐng</span> (Lit: "watch movie")</td></tr>
                                    <tr><td>Listening to music</td><td><span class="hanzi" data-speak="聽音樂">聽音樂</span></td><td><span class="pinyin">tīng yīnyuè</span> (Lit: "listen music")</td></tr>
                                    <tr><td>Exercise / Sports</td><td><span class="hanzi" data-speak="運動">運動</span></td><td><span class="pinyin">yùndòng</span></td></tr>
                                    <tr><td>Traveling</td><td><span class="hanzi" data-speak="旅行">旅行</span></td><td><span class="pinyin">lǚxíng</span></td></tr>
                                    <tr><td>Playing (video) games</td><td><span class="hanzi" data-speak="玩遊戲">玩遊戲</span> / <span class="hanzi" data-speak="玩電動">玩電動</span></td><td><span class="pinyin">wán yóuxì / wán diàndòng</span></td></tr>
                                    <tr><td>Shopping</td><td><span class="hanzi" data-speak="逛街">逛街</span></td><td><span class="pinyin">guàngjiē</span> (Lit: "stroll street")</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Making Plans & Social Phrases</h4>
                        <ul class="space-y-4">
                            <li><strong>Are you free (this weekend)?:</strong> <span class="hanzi" data-speak="你這個週末有空嗎">你(這個週末)有空嗎？</span> (<span class="pinyin">Nǐ (zhège zhōumò) yǒu kòng ma?</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="空">空</span> (<span class="pinyin">kòng</span>) means "free time" or "emptiness".</small></li>
                            <li><strong>I'd like to invite you to (e.g., dinner):</strong> <span class="hanzi" data-speak="我想請你吃飯">我想請你吃飯。</span> (<span class="pinyin">Wǒ xiǎng qǐng nǐ chīfàn.</span>)</li>
                            <li><strong>How about we go see a movie?:</strong> <span class="hanzi" data-speak="我們去看電影，好嗎">我們去看電影，好嗎？</span> (<span class="pinyin">Wǒmen qù kàn diànyǐng, hǎo ma?</span>)
                                <br><small class="text-muted">A common pattern: `[Proposal], 好嗎?` (hǎo ma? - okay?)</small></li>
                            <li><strong>When?:</strong> <span class="hanzi" data-speak="什麼時候">什麼時候？</span> (<span class="pinyin">Shénme shíhou?</span>)</li>
                            <li><strong>Okay / Sure:</strong> <span class="hanzi" data-speak="好啊">好啊</span> (<span class="pinyin">Hǎo a!</span>) (The `a` particle makes it enthusiastic.)</li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">Extra: The Culture of 請客 (qǐngkè) - "To Treat"</h5>
                            <p class="text-sm mb-3">The verb <span class="hanzi" data-speak="請">請</span> (<span class="pinyin">qǐng</span>) is very important. It means "to invite," but in the context of a meal or activity, it almost always implies **"to treat" (to pay for)**.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li>If someone says <span class="hanzi" data-speak="我請你吃飯">我請你吃飯</span> (<span class="pinyin">wǒ qǐng nǐ chīfàn</span>), they are offering to pay for your meal.</li>
                                <li>The noun for this is <span class="hanzi" data-speak="請客">請客</span> (<span class="pinyin">qǐngkè</span>) - "to host" or "to treat".</li>
                                <li><strong>My treat today!:</strong> <span class="hanzi" data-speak="今天我請客">今天我請客！</span> (<span class="pinyin">Jīntiān wǒ qǐngkè!</span>)</li>
                                <li><strong>Who is paying?:</strong> <span class="hanzi" data-speak="誰請客">誰請客？</span> (<span class="pinyin">Shéi qǐngkè?</span>)</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson18"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson19"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson20"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson20">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 20: Ordering Food (點餐)</h3>
                        <p class="mb-5 text-muted leading-relaxed">This is one of the most practical and fun skills to learn. This lesson covers how to get a table, order, ask for the bill, and useful phrases for eating out. All examples use Traditional Chinese.</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Part 1: Getting a Table (入座)</h4>
                        <ul class="space-y-4">
                            <li><strong>(At the door) How many people?:</strong> <span class="hanzi" data-speak="請問幾位">請問幾位？</span> (<span class="pinyin">Qǐngwèn jǐ wèi?</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="位">位</span> (<span class="pinyin">wèi</span>) is the polite measure word for people.</small></li>
                            <li><strong>Two people:</strong> <span class="hanzi" data-speak="兩位">兩位</span> (<span class="pinyin">liǎng wèi</span>)</li>
                            <li><strong>Do you have a reservation?:</strong> <span class="hanzi" data-speak="有訂位嗎">有訂位嗎？</span> (<span class="pinyin">Yǒu dìngwèi ma?</span>)</li>
                            <li><strong>Please sit here:</strong> <span class="hanzi" data-speak="請坐這裡">請坐這裡</span> (<span class="pinyin">Qǐng zuò zhèlǐ</span>)</li>
                        </ul>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Part 2: Ordering (點餐)</h4>
                        <ul class="space-y-4">
                            <li><strong>We'd like to order:</strong> <span class="hanzi" data-speak="我們要點餐">我們要點餐</span> (<span class="pinyin">Wǒmen yào diǎncān</span>)</li>
                            <li><strong>Menu, please:</strong> <span class="hanzi" data-speak="請給我菜單">請給我菜單</span> (<span class="pinyin">Qǐng gěi wǒ càidān</span>)</li>
                            <li><strong>What's your specialty?:</strong> <span class="hanzi" data-speak="你們的招牌菜是什麼">你們的招牌菜是什麼？</span> (<span class="pinyin">Nǐmen de zhāopái cài shì shénme?</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="招牌菜">招牌菜</span> (<span class="pinyin">zhāopái cài</span>) = "signboard dish" / specialty.</small></li>
                            <li><strong>I want this one:</strong> <span class="hanzi" data-speak="我要這個">我要這個</span> (<span class="pinyin">Wǒ yào zhège</span>)</li>
                            <li><strong>I want one bowl of beef noodles:</strong> <span class="hanzi" data-speak="我要一碗牛肉麵">我要一碗牛肉麵</span> (<span class="pinyin">Wǒ yào yì wǎn niúròu miàn</span>)</li>
                            <li><strong>Spicy / Not spicy:</strong> <span class="hanzi" data-speak="要辣">要辣</span> / <span class="hanzi" data-speak="不要辣">不要辣</span> (<span class="pinyin">yào là / bú yào là</span>)</li>
                        </ul>
                        
                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Extra: Common Food Vocabulary</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead><tr><th>English</th><th>Traditional Chinese</th><th>Pinyin</th></tr></thead>
                                <tbody>
                                    <tr><td>Beef</td><td><span class="hanzi" data-speak="牛肉">牛肉</span></td><td><span class="pinyin">niúròu</span></td></tr>
                                    <tr><td>Pork</td><td><span class="hanzi" data-speak="豬肉">豬肉</span></td><td><span class="pinyin">zhūròu</span></td></tr>
                                    <tr><td>Chicken</td><td><span class="hanzi" data-speak="雞肉">雞肉</span></td><td><span class="pinyin">jīròu</span></td></tr>
                                    <tr><td>Fish</td><td><span class="hanzi" data-speak="魚">魚</span></td><td><span class="pinyin">yú</span></td></tr>
                                    <tr><td>Vegetables</td><td><span class_ ="hanzi" data-speak="蔬菜">蔬菜</span></td><td><span class="pinyin">shūcài</span></td></tr>
                                    <tr><td>Rice</td><td><span class="hanzi" data-speak="飯">飯</span></td><td><span class="pinyin">fàn</span></td></tr>
                                    <tr><td>Noodles</td><td><span class="hanzi" data-speak="麵">麵</span></td><td><span class="pinyin">miàn</span></td></tr>
                                    <tr><td>Soup</td><td><span class="hanzi" data-speak="湯">湯</span></td><td><span class="pinyin">tāng</span></td></tr>
                                    <tr><td>Bubble Tea</td><td><span class="hanzi" data-speak="珍珠奶茶">珍珠奶茶</span></td><td><span class="pinyin">zhēnzhū nǎichá</span> (boba milk tea)</td></tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Part 3: Paying the Bill (結帳)</h4>
                        <ul class="space-y-4">
                            <li><strong>Check, please!:</strong> <span class="hanzi" data-speak="結帳">結帳！</span> (<span class="pinyin">Jiézhàng!</span>) or <span class="hanzi" data-speak="買單">買單！</span> (<span class="pinyin">Mǎidān!</span>)
                                <br><small class="text-muted">(You can say this to the staff from your table or go to the counter).</small></li>
                            <li><strong>Total is how much money?:</strong> <span class="hanzi" data-speak="總共多少錢">總共多少錢？</span> (<span class="pinyin">Zǒnggòng duōshao qián?</span>)</li>
                            <li><strong>Can I use a credit card?:</strong> <span class="hanzi" data-speak="可以刷卡嗎">可以刷卡嗎？</span> (<span class="pinyin">Kěyǐ shuākǎ ma?</span>)
                                <br><small class="text-muted"><span class="hanzi" data-speak="刷卡">刷卡</span> (<span class="pinyin">shuākǎ</span>) = to swipe card.</small></li>
                            <li><strong>We only accept cash:</strong> <span class="hanzi" data-speak="只收現金">只收現金</span> (<span class="pinyin">Zhǐ shōu xiànjīn</span>)</li>
                        </ul>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">More Extra Contents: 內用 (nèiyòng) or 外帶 (wàidài)?</h5>
                            <p class="text-sm mb-3">This is the most common question you'll be asked at any casual eatery or drink shop: "For here or to go?"</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>The Question:</strong> <span class="hanzi" data-speak="內用還是外帶">內用還是外帶？</span> (<span class="pinyin">Nèiyòng háishì wàidài?</span>)
                                    <br><small class="ml-4 text-muted">"For here or to go?" (<span class="hanzi" data-speak="還是">還是</span> means "or" in questions)</small></li>
                                <li><strong>Answer (For here):</strong> <span class="hanzi" data-speak="內用">內用</span> (<span class="pinyin">nèiyòng</span>) (Lit: "inside use")</li>
                                <li><strong>Answer (To go):</strong> <span class="hanzi" data-speak="外帶">外帶</span> (<span class="pinyin">wàidài</span>) (Lit: "outside carry")</li>
                                <li class="mt-2"><strong>To get leftovers packed up (Doggy bag):</strong>
                                    <br><strong class="ml-4">"I want to pack this up":</strong> <span class="hanzi" data-speak="我要打包">我要打包</span> (<span class="pinyin">Wǒ yào dǎbāo</span>)</li>
                            </ul>
                        </div>

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson19"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson20"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson21"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson21">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 21: Modern Tech & Slang (網路科技與流行語)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Language is always evolving, especially online. This lesson covers essential words for technology and some popular slang you'll see in text messages and on social media in Taiwan. (All Traditional Chinese).</p>

                        <h4 class="font-semibold mt-6 mb-3 text-lg text-slate-700">Essential Tech Vocabulary (科技詞彙)</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead><tr><th>English</th><th>Traditional Chinese</th><th>Pinyin</th><th>Notes</th></tr></thead>
                                <tbody>
                                    <tr>
                                        <td>Computer</td>
                                        <td><span class="hanzi" data-speak="電腦">電腦</span></td>
                                        <td><span class="pinyin">diànnǎo</span></td>
                                        <td>Lit. "electric brain"</td>
                                    </tr>
                                    <tr>
                                        <td>Mobile Phone</td>
                                        <td><span class="hanzi" data-speak="手機">手機</span></td>
                                        <td><span class="pinyin">shǒujī</span></td>
                                        <td>Lit. "hand machine"</td>
                                    </tr>
                                    <tr>
                                        <td>Internet</td>
                                        <td><span class="hanzi" data-speak="網路">網路</span></td>
                                        <td><span class="pinyin">wǎnglù</span></td>
                                        <td>Lit. "net road"</td>
                                    </tr>
                                    <tr>
                                        <td>To go online</td>
                                        <td><span class="hanzi" data-speak="上網">上網</span></td>
                                        <td><span class="pinyin">shàngwǎng</span></td>
                                        <td>Lit. "to get on the net"</td>
                                    </tr>
                                    <tr>
                                        <td>Wi-Fi</td>
                                        <td><span class="hanzi" data-speak="無線網路">無線網路</span></td>
                                        <td><span class="pinyin">wúxiàn wǎnglù</span></td>
                                        <td>Lit. "no-line net road" (Often just "Wi-Fi")</td>
                                    </tr>
                                    <tr>
                                        <td>Social Media</td>
                                        <td><span class="hanzi" data-speak="社群媒體">社群媒體</span></td>
                                        <td><span class="pinyin">shèqún méitǐ</span></td>
                                        <td>(e.g., Facebook, Instagram)</td>
                                    </tr>
                                    <tr>
                                        <td>To send a text/message</td>
                                        <td><span class="hanzi" data-speak="傳訊息">傳訊息</span></td>
                                        <td><span class="pinyin">chuán xùnxí</span></td>
                                        <td>(Also: <span class="hanzi" data-speak="傳 line">傳 Line</span> "to send a Line message")</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <h4 class="font-semibold mt-8 mb-3 text-lg text-slate-700">Common Slang & Phrases (流行語)</h4>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead><tr><th>Slang (Trad.)</th><th>Pinyin</th><th>Meaning & Use</th></tr></thead>
                                <tbody>
                                    <tr>
                                        <td><span class="hanzi" data-speak="傻眼">傻眼</span></td>
                                        <td><span class="pinyin">shǎyǎn</span></td>
                                        <td>"Dumbfounded," "facepalm," "mind-boggling." Used when something ridiculous or unbelievable happens. (Lit: "dumbfounded eyes")</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="GG">GG</span></td>
                                        <td><span class="pinyin">jī jī</span></td>
                                        <td>"It's over," "I'm screwed," "it's doomed." From "Good Game" in gaming. Used when you fail or something is hopeless.</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="www">www</span></td>
                                        <td>(none)</td>
                                        <td>Represents laughter. From the Japanese `warau` (笑う - to laugh). The more 'w's, the harder the laughter. (e.g., `www`, `wwwww`).</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="鄉民">鄉民</span></td>
                                        <td><span class="pinyin">xiāngmín</span></td>
                                        <td>"Netizen," "internet user," "people of the internet." Often refers to users on forums like PTT (a popular Taiwanese forum). (Lit: "villager")</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="太扯了">太扯了</span></td>
                                        <td><span class="pinyin">tài chě le</span></td>
                                        <td>"That's outrageous!" "So ridiculous!" "Unbelievable!" (Lit: "too pulling")</td>
                                    </tr>
                                    <tr>
                                        <td><span class="hanzi" data-speak="母湯喔">母湯喔</span></td>
                                        <td><span class="pinyin">mǔ tāng o</span></td>
                                        <td>"Don't do that!" / "That's not good!" A funny, slangy way to say <span class="hanzi" data-speak="不行">不行</span> or <span class="hanzi" data-speak="不要">不要</span>, from a Taiwanese pronunciation.</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <div class="callout p-4 mt-8">
                            <h5 class="font-bold mb-2">More Extra Contents: Slang Explained</h5>
                            <p class="text-sm mb-3">Here's a deeper look at the most common slang you'll encounter.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>What is `www`?:</strong> In English, `lol` or `haha` is used for laughter. In Mandarin (especially in Taiwan, influenced by Japan), `www` is common. It comes from the Japanese word for laugh, <span class="hanzi">笑う</span> (<span class->warau</span>). So, <span class="hanzi" data-speak="這太好笑了www">這太好笑了www</span> (<span class="pinyin">zhè tài hǎoxiào le www</span>) means "This is so funny lol."</li>
                                
                                <li><strong>How to use `GG` (jī jī):</strong> This is used *all the time* when something bad is confirmed.
                                    <br><strong class="ml-4">Ex 1:</strong> "I forgot my wallet." (我忘了帶錢包 / <span class="pinyin">wǒ wàng le dài qiánbāo</span>) "GG, you can't buy lunch." (GG了，你不能買午餐了 / <span class="pinyin">GG le, nǐ bùnéng mǎi wǔcān le</span>).
                                    <br><strong class="ml-4">Ex 2:</strong> "Oh no, it's raining and I don't have an umbrella." (下雨了，我沒有傘 / <span class="pinyin">xià yǔ le, wǒ méiyǒu sǎn</span>). "GG".</li>

                                <li><strong>How to use `傻眼 (shǎyǎn)`:</strong> Use this when you are shocked, speechless, or dumbfounded by a situation.
                                    <br><strong class="ml-4">Ex:</strong> "He spent his entire salary on a video game." (他把薪水都花在遊戲上了 / <span class="pinyin">tā bǎ xīnshuǐ dōu huā zài yóuxì shàng le</span>).
                                    <br><strong class="ml-4">Your reply:</strong> <span class="hanzi" data-speak="傻眼">傻眼...</span> (<span class="pinyin">shǎyǎn...</span>) - "I'm speechless..." / "That's insane."</li>
                            </ul>
                        </div>

                        <!-- NEW CALLOUT SECTION -->
                        <div class="callout p-4 mt-6"> <!-- Added mt-6 for spacing -->
                            <h5 class="font-bold mb-2">Even More Extra Contents: Useful Phrases & Concepts</h5>
                            <p class="text-sm mb-3">Here are a few more terms you might encounter online or in casual conversation.</p>
                            <ul class="list-disc list-inside mt-2 text-sm space-y-3">
                                <li><strong>To Google something:</strong> <span class="hanzi" data-speak="估狗">估狗</span> (<span class="pinyin">gūgǒu</span>)
                                    <br><small class="ml-4 text-muted">A direct transliteration of "Google." Ex: <span class="hanzi" data-speak="我估狗一下">我估狗一下</span> (<span class="pinyin">Wǒ gūgǒu yíxià</span>) - "Let me Google it quickly."</small></li>
                                
                                <li><strong>Influencer / KOL (Key Opinion Leader):</strong> <span class="hanzi" data-speak="網紅">網紅</span> (<span class="pinyin">wǎnghóng</span>)
                                    <br><small class="ml-4 text-muted">Lit. "net red." Someone famous on the internet.</small></li>

                                <li><strong>To Like (on social media):</strong> <span class="hanzi" data-speak="按讚">按讚</span> (<span class="pinyin">àn zàn</span>)
                                    <br><small class="ml-4 text-muted">Lit. "press praise." Ex: <span class="hanzi" data-speak="幫我按讚">幫我按讚！</span> (<span class="pinyin">Bāng wǒ àn zàn!</span>) - "Like my post!"</small></li>

                                <li><strong>"Feels bad man" / Sigh / Facepalm:</strong> <span class="hanzi" data-speak="哭哭">哭哭</span> (<span class="pinyin">kūkū</span>)
                                    <br><small class="ml-4 text-muted">Lit. "cry cry." Used often in text to express mild disappointment, sadness, or a sigh, often humorously. Sometimes written as `QQ`.</small></li>

                                <li><strong>"So annoying!":</strong> <span class="hanzi" data-speak="很煩欸">很煩欸！</span> (<span class="pinyin">Hěn fán欸!</span>)
                                     <br><small class="ml-4 text-muted">The <span class="pinyin">欸</span> (ei) is a common Taiwanese sentence particle adding emphasis or a slight tone of complaint/exasperation.</small></li>
                            </ul>
                        </div>
                        <!-- END NEW CALLOUT SECTION -->

                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson21"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson22"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="lesson23"><span>Next Lesson</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="lesson22">
                        <h3 class="card-title text-xl font-semibold mb-4">Lesson 23: Common Idioms (成語)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Content for this lesson is coming soon...</p>
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson22"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="lesson23"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter1"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                </section>
                <!-- END Level 3 -->

                <!-- NEW: Level 4 Placeholders -->
                <section id="level4" class="content-page-container">
                    <article class="content-page card p-6 mb-8" data-page-id="chapter1">
                        <h3 class="card-title text-xl font-semibold mb-4">Chapter 1: Mandarin Alphabets</h3>
                        <p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p>
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="lesson23"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Lesson</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter1"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter2"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter2">
                        <h3 class="card-title text-xl font-semibold mb-4">Chapter 2: Numbers (Detailed)</h3>
                        <p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p>
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter1"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter2"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter3"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter3">
                        <h3 class="card-title text-xl font-semibold mb-4">Chapter 3: Vegetables & Fruits</h3>
                        <p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p>
                        <div class="page-footer-nav">
                            <div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter2"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div>
                            <div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter3"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter4"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div>
                        </div>
                    </article>
                <!-- END NEW Placeholders -->

                    <!-- ... Other chapters ... -->
                    <article class="content-page card p-6 mb-8" data-page-id="chapter4"><h3 class="card-title text-xl font-semibold mb-4">Chapter 4: Daily Life Products</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter3"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter4"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter5"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter5"><h3 class="card-title text-xl font-semibold mb-4">Chapter 5: Family Conversations</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter4"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter5"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter6"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter6"><h3 class="card-title text-xl font-semibold mb-4">Chapter 6: Friend Conversations</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter5"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter6"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter7"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter7"><h3 class="card-title text-xl font-semibold mb-4">Chapter 7: Work Conversations</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter6"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter7"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter8"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter8"><h3 class="card-title text-xl font-semibold mb-4">Chapter 8: School & Business</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter7"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter8"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter9"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter9"><h3 class="card-title text-xl font-semibold mb-4">Chapter 9: Core Vocabulary</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter8"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter9"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><button class="next-page-btn" data-next-page-id="chapter10"><span>Next Chapter</span><svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg></button></div></div></article>
                    <article class="content-page card p-6 mb-8" data-page-id="chapter10"><h3 class="card-title text-xl font-semibold mb-4">Chapter 10: Test Yourself</h3><p class="mb-5 text-muted leading-relaxed">Content for this chapter is coming soon...</p><div class="page-footer-nav"><div class="flex gap-3"><button class="prev-page-btn" data-prev-page-id="chapter9"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16l-4-4m0 0l4-4m-4 4h18"></path></svg><span>Previous Chapter</span></button><button class="home-page-btn" data-home-page-id="home"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4a1 1 0 001-1v-4a1 1 0 00-1-1H9a1 1 0 00-1 1v4a1 1 0 001 1h1z"></path></svg><span>Home</span></button></div><div class="flex gap-3"><button class="mark-complete-btn" data-page-id="chapter10"><svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>Mark as Completed</span></button><!-- No next button on last page --></div></div></article>

                 </section>
                <!-- END Level 4 -->
                
                <!-- FOOTER -->
                <footer class="mt-16 pt-8 border-t border-slate-200 text-center text-slate-500 text-sm">
                    <p>&copy; 2025 brianhexer / Mandarin Guide. All rights reserved.</p>
                </footer>
                
            </div>
        </div>
    </main>

    <!-- SEARCH MODAL -->
    <div id="search-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4" aria-hidden="true">
        <!-- Modal Overlay -->
        <div id="search-modal-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"></div>
        
        <!-- Modal Content -->
        <div class="relative w-full max-w-lg p-0 bg-white rounded-lg shadow-xl transform transition-all overflow-hidden">
            <!-- Search Input -->
            <div class="relative p-4">
                 <input type="search" id="search-input" placeholder="Search lessons..." class="w-full pl-10 pr-12 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                 <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                    <svg class="w-5 h-5 text-slate-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                 </div>
                 <button id="search-modal-close" aria-label="Close search" class="absolute inset-y-0 right-0 pr-4 flex items-center text-slate-400 hover:text-slate-600 transition-colors">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path></svg>
                 </button>
            </div>
            
            <!-- Search Results -->
            <div id="search-results-container" class="max-h-96 overflow-y-auto p-4 border-t border-slate-200">
                <p class="text-center text-slate-500">Type to search for lessons.</p>
            </div>
        </div>
    </div>
    <!-- END SEARCH MODAL -->

    <!-- VERIFICATION MODAL (Unchanged) -->
    <div id="next-lesson-modal" class="fixed inset-0 z-50 flex items-center justify-center p-4" aria-hidden="true">
        <!-- Modal Overlay -->
        <div id="modal-overlay" class="fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity"></div>
        
        <!-- Modal Content -->
        <div class="relative w-full max-w-md p-6 bg-white rounded-lg shadow-xl transform transition-all">
            <div class="flex items-start">
                <div class="flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-blue-100 sm:mx-0 sm:h-10 sm:w-10">
                    <svg class="h-6 w-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4 0 1.152-.468 2.185-1.22 2.963C13.978 14.63 13 15.21 13 16h-1v-1.5c0-1.076.62-2.062 1.62-2.887C14.43 10.843 15 10.106 15 9c0-1.105-.895-2-2-2-1.036 0-1.85.738-1.98 1.707L8.228 9zM12 20a1 1 0 100-2 1 1 0 000 2z"></path></svg>
                </div>
                <div class="ml-4 text-left">
                    <h3 class="text-lg font-semibold leading-6 text-gray-900" id="modal-title">Proceed to Next Lesson?</h3>
                    <div class="mt-2">
                        <p class="text-sm text-gray-500">
                            Are you sure you're ready to move on?
                        </p>
                    </div>
                </div>
            </div>

            <div class="flex items-center justify-center space-x-2 mt-4 pt-4 border-t border-gray-200">
                <span class="text-sm text-slate-600 hidden sm:inline">Connect with Admin &gt;&gt;&gt;</span> <!-- MODIFIED: Added hidden sm:inline -->
                
                <div class="w-8 h-8 rounded-full bg-slate-200 border border-slate-300 flex items-center justify-center overflow-hidden">
                     <img class="w-full h-full object-cover" 
                          src="./images/profile.jpg" 
                          alt="Brian's profile picture"
                          onerror="this.parentElement.innerHTML = `<svg class='w-6 h-6 text-slate-400' fill='currentColor' viewBox='0 0 20 20' xmlns='http://www.w3.org/2000/svg'><path fill-rule='evenodd' d='M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z' clip-rule='evenodd'></path></svg>`">
                </div>
        
                <a href="https://www.instagram.com/brian_offl/" target="_blank" rel="noopener noreferrer" class="insta-btn flex items-center border border-pink-500 text-pink-500 hover:bg-pink-500 hover:text-white text-sm font-medium py-2 px-2 sm:px-3 rounded-lg transition-colors"> <!-- MODIFIED: px-2 sm:px-3 -->
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"> <!-- MODIFIED: removed mr-2 -->
                        <rect x="2" y="2" width="20" height="20" rx="5.657" ry="5.657"></rect>
                        <path d="M16 11.37A4 4 0 1112.63 8 4 4 0 0116 11.37zm1.5-4.87h.01"></path>
                    </svg>
                    <span class="hidden sm:inline-block ml-2 typewriter-button">Insta</span> <!-- MODIFIED: Added hidden sm:inline-block, ml-2, typewriter-button -->
                </a>
                <a href="https://github.com/brianhexer" target="_blank" rel="noopener noreferrer" class="flex items-center border border-gray-700 text-gray-700 hover:bg-gray-700 hover:text-white text-sm font-medium py-2 px-2 sm:px-3 rounded-lg transition-colors"> <!-- MODIFIED: px-2 sm:px-3 -->
                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"> <!-- MODIFIED: removed mr-2 -->
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    <span class="hidden sm:inline-block ml-2 typewriter-button">GitHub</span> <!-- MODIFIED: Added hidden sm:inline-block, ml-2, typewriter-button -->
                </a>
            </div>

            <div class="mt-5 sm:mt-6 sm:flex sm:flex-row-reverse gap-3">
                <button id="modal-confirm-btn" type="button" class="inline-flex w-full justify-center rounded-md border border-transparent bg-green-600 px-4 py-2 text-base font-medium text-white shadow-sm hover:bg-green-700 sm:w-auto sm:text-sm transition-colors">
                    Yes, Proceed
                </button>
                <button id="modal-cancel-btn" type="button" class="mt-3 inline-flex w-full justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 sm:mt-0 sm:w-auto sm:text-sm transition-colors">
                    Not Yet
                </button>
            </div>
        </div>
    </div>
    <!-- END MODAL -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- NEW: T&C and App Initialization Logic ---
            const tosPage = document.getElementById('tos-page');
            const tosAcceptBtn = document.getElementById('tos-accept-btn');
            const mainHeader = document.querySelector('.header');
            const mainContent = document.querySelector('.main-content');
            
            let appInitialized = false; // Flag to prevent double-init
            // --- END NEW ---


            // --- PWA Service Worker Registration ---
            if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('./sw.js').catch(err => {
                console.error('Service Worker registration failed:', err);
              });
            }

            // --- NEW: PWA Install Button Logic ---
            let deferredPrompt;
            const homeInstallBtn = document.getElementById('home-install-btn');

            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevent the mini-infobar from appearing on mobile
                e.preventDefault();
                // Stash the event so it can be triggered later.
                deferredPrompt = e;
                // Update UI to notify the user they can install the PWA
                if (homeInstallBtn) {
                    homeInstallBtn.classList.remove('hidden');
                }
            });

            if (homeInstallBtn) {
                homeInstallBtn.addEventListener('click', async () => {
                    if (deferredPrompt) {
                        // Show the install prompt
                        deferredPrompt.prompt();
                        // Wait for the user to respond to the prompt
                        const { outcome } = await deferredPrompt.userChoice;
                        console.log(`User response to the install prompt: ${outcome}`);
                        // We've used the prompt, and can't use it again, clear it
                        deferredPrompt = null;
                        // Hide the install button
                        homeInstallBtn.classList.add('hidden');
                    }
                });
            }

            window.addEventListener('appinstalled', () => {
                // Hide the install button
                if (homeInstallBtn) {
                    homeInstallBtn.classList.add('hidden');
                }
                deferredPrompt = null;
                console.log('PWA was installed');
            });
            // --- END NEW PWA Install Logic ---


            // --- STATE MANAGEMENT ---
            const STORAGE_KEY = 'mandarinGuideProgress';
            let currentPageId = 'home';
            let progress = { completed: [] };
            let pendingNextPageId = null;
            
            // --- Modal Elements ---
            const modal = document.getElementById('next-lesson-modal');
            const modalOverlay = document.getElementById('modal-overlay');
            const modalConfirmBtn = document.getElementById('modal-confirm-btn');
            const modalCancelBtn = document.getElementById('modal-cancel-btn');

            // --- NEW: Search Modal Elements ---
            const searchIconBtn = document.getElementById('search-icon-btn');
            const searchModal = document.getElementById('search-modal');
            const searchModalOverlay = document.getElementById('search-modal-overlay');
            const searchModalClose = document.getElementById('search-modal-close');
            const searchInput = document.getElementById('search-input');
            const searchResultsContainer = document.getElementById('search-results-container');
            
            // --- UPDATED: Collect all page IDs from the new nav links ---
            const allPageIds = ['home', ...Array.from(document.querySelectorAll('.nav-link[data-page-id]'))
                                         .map(a => a.dataset.pageId)
                                         .filter(id => id !== 'home')];
            const totalLessons = allPageIds.length - 1;
            let searchIndex = [];

            // --- NEW: App Initializer Function ---
            function initializeApp() {
                if (appInitialized) return;
                appInitialized = true;
                
                // Load progress and build search index
                migrateUserName(); // NEW: Handle old 'userName' key
                loadProgress();
                buildSearchIndex(); 
                updateWelcomeMessage(); // NEW: Update welcome message
                
                // Determine starting page
                let lastPageId = 'home';
                try {
                    // On first load (after T&C), session storage will be empty, so it defaults to 'home'
                    // On subsequent loads, it will load the last viewed page
                    const storedPageId = sessionStorage.getItem('mandarinGuideLastPage');
                    if (storedPageId && allPageIds.includes(storedPageId)) {
                        lastPageId = storedPageId;
                    }
                } catch (e) {
                    console.warn("Failed to read from sessionStorage", e);
                }
                
                // Show the determined page
                showPage(lastPageId);
                
                // Make the main app UI visible
                mainHeader.classList.remove('hidden');
                mainContent.classList.remove('hidden');
            }
            // --- END NEW ---

            // --- CORE FUNCTIONS ---

            function saveProgress() {
                try {
                    localStorage.setItem(STORAGE_KEY, JSON.stringify(progress));
                } catch (e) {
                    console.error("Failed to save progress to localStorage", e);
                }
            }

            // --- NEW: Add loadProgress function ---
            function loadProgress() {
                try {
                    const storedProgress = localStorage.getItem(STORAGE_KEY);
                    if (storedProgress) {
                        progress = JSON.parse(storedProgress);
                        if (!progress.completed) {
                            progress.completed = [];
                        }
                    } else {
                        progress = { completed: [] };
                    }
                } catch (e) {
                    console.error("Failed to load or parse progress from localStorage", e);
                    progress = { completed: [] }; // Reset on error
                }
            }
            // --- END NEW ---

            // --- NEW: Handle migration from old 'userName' key ---
            function migrateUserName() {
                try {
                    const oldName = localStorage.getItem('userName');
                    // Check if old key exists AND new key doesn't
                    if (oldName && !localStorage.getItem('userGivenName')) {
                        localStorage.setItem('userGivenName', oldName); // Move data
                        localStorage.removeItem('userName'); // Clean up old key
                    }
                } catch (e) {
                    console.warn("Could not migrate userName", e);
                }
            }

            // --- MODIFIED: Update Welcome Message ---
            function updateWelcomeMessage() {
                try {
                    const givenName = localStorage.getItem('userGivenName');
                    const surname = localStorage.getItem('userSurname');
                    const el = document.getElementById('welcome-message');

                    if (el && givenName) {
                        // Check if surname exists and isn't empty
                        const name = (surname && surname.trim() !== '') ? `${givenName} ${surname}` : givenName;
                        el.innerHTML = `Welcome ${escapeHTML(name)}! <span class="wave">👋</span>`;
                        
                        // Re-calculate animation steps based on new name length
                        const newLength = 9 + name.length + 2; // "Welcome " (8) + name + "! " (2)
                        el.style.animation = `typing 4s steps(${newLength}, end) infinite`;
                    } else if (el) {
                        // Fallback if no name is set
                        el.innerHTML = `Welcome Buddy! <span class="wave">👋</span>`;
                        el.style.animation = `typing 4s steps(17, end) infinite`; // Default steps
                    }
                } catch (e) {
                    console.error("Failed to update welcome message", e);
                }
            }
            // --- END MODIFIED ---

            function showPage(pageId) {
                if (!pageId) pageId = 'home';
                currentPageId = pageId;

                document.querySelectorAll('.content-page').forEach(page => {
                    page.classList.remove('active');
                });

                const activePage = document.querySelector(`.content-page[data-page-id="${pageId}"]`);
                if (activePage) {
                    activePage.classList.add('active');
                } else {
                    document.querySelector('.content-page[data-page-id="home"]').classList.add('active');
                    currentPageId = 'home';
                }
                
                // --- NEW: Save current page to session storage ---
                try {
                    sessionStorage.setItem('mandarinGuideLastPage', currentPageId);
                } catch (e) {
                    console.warn("Failed to save to sessionStorage", e);
                }
                // --- END NEW ---
                
                window.scrollTo(0, 0);
                updateUI();
            }
            
            function togglePageCompletion(pageId) {
                const btn = document.querySelector(`.mark-complete-btn[data-page-id="${pageId}"]`);
                if (progress.completed.includes(pageId)) {
                    progress.completed = progress.completed.filter(id => id !== pageId);
                    if(btn) btn.classList.remove('is-completed');
                } else {
                    progress.completed.push(pageId);
                    if(btn) btn.classList.add('is-completed');
                }
                saveProgress();
                updateUI();
            }

            function markPageAsCompleted(pageId) {
                if (pageId === 'home') return;
                
                const btn = document.querySelector(`.mark-complete-btn[data-page-id="${pageId}"]`);
                if (!progress.completed.includes(pageId)) {
                    progress.completed.push(pageId);
                    if(btn) btn.classList.add('is-completed');
                    saveProgress();
                    updateUI();
                }
            }

            function updateUI() {
                // --- UPDATED: Update nav links on home page ---
                document.querySelectorAll('.nav-link').forEach(link => {
                    const pageId = link.dataset.pageId;
                    
                    link.classList.remove('is-viewing', 'is-completed');

                    if (progress.completed.includes(pageId)) {
                        link.classList.add('is-completed');
                    }
                    if (pageId === currentPageId) {
                        link.classList.add('is-viewing');
                        // NEW: Open the parent dropdown if the active page is inside
                        const parentDropdown = link.closest('details');
                        if (parentDropdown) {
                            parentDropdown.open = true;
                        }
                    }
                });

                // Update current page's "Mark as Completed" button
                const currentCompleteBtn = document.querySelector(`.mark-complete-btn[data-page-id="${currentPageId}"]`);
                if (currentCompleteBtn) {
                    if (progress.completed.includes(currentPageId)) {
                        currentCompleteBtn.classList.add('is-completed');
                        currentCompleteBtn.querySelector('span').innerText = 'Completed!';
                    } else {
                        currentCompleteBtn.classList.remove('is-completed');
                        currentCompleteBtn.querySelector('span').innerText = 'Mark as Completed';
                    }
                }
                
                // Update main progress bar
                updateProgressBar();
            }
            
            function updateProgressBar() {
                const completedCount = progress.completed.length;
                const percent = totalLessons > 0 ? (completedCount / totalLessons) * 100 : 0;
                
                const bar = document.getElementById('progress-bar');
                const text = document.getElementById('progress-text');
                
                if (bar) bar.style.width = `${percent}%`;
                if (text) text.innerText = `${completedCount} / ${totalLessons} Completed`;
            }

            // --- NEW: Search Functions ---

            function buildSearchIndex() {
                searchIndex = [];
                allPageIds.forEach(pageId => {
                    if (pageId === 'home') return; // Don't index home page
                    
                    const pageElement = document.querySelector(`.content-page[data-page-id="${pageId}"]`);
                    if (!pageElement) return;

                    const titleEl = pageElement.querySelector('.card-title');
                    const title = titleEl ? titleEl.innerText.trim() : 'No Title';
                    
                    // Get all relevant text content, avoid script tags
                    const content = Array.from(pageElement.querySelectorAll('p, li, th, td'))
                                      .map(el => el.textContent.trim())
                                      .join(' ')
                                      .toLowerCase();
                    
                    searchIndex.push({
                        id: pageId,
                        title: title,
                        content: content,
                        snippet: pageElement.querySelector('p.text-muted') ? pageElement.querySelector('p.text-muted').innerText.trim() : 'Click to see content...'
                    });
                });
            }

            function openSearchModal() {
                if (searchModal) searchModal.setAttribute('aria-hidden', 'false');
                if (searchInput) searchInput.focus();
                performSearch(); // Show initial state
            }

            function closeSearchModal() {
                if (searchModal) searchModal.setAttribute('aria-hidden', 'true');
                if (searchInput) searchInput.value = '';
                if (searchResultsContainer) searchResultsContainer.innerHTML = '<p class="text-center text-slate-500">Type to search for lessons.</p>';
            }

            function performSearch() {
                if (!searchInput || !searchResultsContainer) return;

                const query = searchInput.value.trim().toLowerCase();
                
                if (query.length < 1) {
                    searchResultsContainer.innerHTML = '<p class="text-center text-slate-500">Type to search for lessons.</p>';
                    return;
                }

                const results = searchIndex.filter(item => 
                    item.title.toLowerCase().includes(query) || 
                    item.content.includes(query)
                );

                if (results.length === 0) {
                    searchResultsContainer.innerHTML = `<p class="text-center text-slate-500">No results found for "<strong>${escapeHTML(query)}</strong>".</p>`;
                    return;
                }

                searchResultsContainer.innerHTML = results.map(item => `
                    <a href="#" class="search-result-item" data-page-id="${item.id}">
                        <h4>${item.title}</h4>
                        <p>${escapeHTML(item.snippet)}</p>
                    </a>
                `).join('');
            }
            
            function escapeHTML(str) {
                return str.replace(/[&<>"']/g, function(match) {
                    return {
                        '&': '&amp;',
                        '<': '&lt;',
                        '>': '&gt;',
                        '"': '&quot;',
                        "'": '&#39;'
                    }[match];
                });
            }

            // --- Modal Functions (Unchanged) ---
            function openModal(nextId) {
                pendingNextPageId = nextId;
                if (modal) modal.setAttribute('aria-hidden', 'false');
            }
            
            function closeModal() {
                pendingNextPageId = null;
                if (modal) modal.setAttribute('aria-hidden', 'true');
            }

            // --- REMOVED: SIDEBAR TOGGLE ---

            // --- EVENT LISTENERS ---

            // --- UPDATED: Nav Link Clicks ---
            document.querySelectorAll('.nav-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = e.currentTarget.dataset.pageId;
                    showPage(pageId);
                    // REMOVED: Sidebar close logic
                });
            });
            
            // "Mark as Completed" Button Clicks (Unchanged)
            document.querySelectorAll('.mark-complete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const pageId = e.currentTarget.dataset.pageId;
                    togglePageCompletion(pageId);
                });
            });

            // "Next Page" Button Clicks (MODIFIED)
            document.querySelectorAll('.next-page-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    // --- MODIFICATION START ---
                    
                    // Ignore clicks on the install button, it has its own listener
                    if (e.currentTarget.id === 'home-install-btn') {
                        return;
                    }
                    
                    const nextId = e.currentTarget.dataset.nextPageId;
                    if (!nextId) return; // Do nothing if there's no next page defined

                    const currentPage = e.currentTarget.closest('.content-page');
                    
                    // Special case for home page "Start Learning" button
                    if (currentPage && currentPage.dataset.pageId === 'home') {
                        showPage(nextId);
                    } else {
                        // All other "Next Lesson" buttons
                        openModal(nextId);
                    }
                    // --- MODIFICATION END ---
                });
            });

            // "Previous Page" Button Clicks (Unchanged)
            document.querySelectorAll('.prev-page-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const prevId = e.currentTarget.dataset.prevPageId;
                    showPage(prevId);
                });
            });

            // "Back to Home" Button Clicks (Unchanged)
            document.querySelectorAll('.home-page-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const homeId = e.currentTarget.dataset.homePageId || 'home';
                    showPage(homeId);
                });
            });

            // --- Modal Event Listeners (Unchanged) ---
            if (modalConfirmBtn) {
                modalConfirmBtn.addEventListener('click', () => {
                    if (currentPageId && currentPageId !== 'home') {
                        markPageAsCompleted(currentPageId);
                    }
                    if (pendingNextPageId) {
                        showPage(pendingNextPageId);
                    }
                    closeModal();
                });
            }
            if (modalCancelBtn) modalCancelBtn.addEventListener('click', closeModal);
            if (modalOverlay) modalOverlay.addEventListener('click', closeModal);

            // --- NEW: Search Event Listeners ---
            if (searchIconBtn) {
                searchIconBtn.addEventListener('click', openSearchModal);
            }
            if (searchModalClose) {
                searchModalClose.addEventListener('click', closeSearchModal);
            }
            if (searchModalOverlay) {
                searchModalOverlay.addEventListener('click', closeSearchModal);
            }
            if (searchInput) {
                searchInput.addEventListener('input', performSearch);
            }
            
            // Handle clicks on search results
            if (searchResultsContainer) {
                 searchResultsContainer.addEventListener('click', (e) => {
                    const resultItem = e.target.closest('.search-result-item');
                    if (resultItem) {
                        e.preventDefault();
                        const pageId = resultItem.dataset.pageId;
                        showPage(pageId);
                        closeSearchModal();
                    }
                 });
            }

            // --- NEW: Accordion for Nav Dropdowns ---
            const allDropdowns = document.querySelectorAll('.nav-dropdown');
            allDropdowns.forEach(dropdown => {
                dropdown.addEventListener('toggle', (e) => {
                    // Only act if the dropdown is being opened
                    if (e.target.open) {
                        // Close all *other* dropdowns
                        allDropdowns.forEach(d => {
                            if (d !== e.target) {
                                d.open = false;
                            }
                        });
                    }
                });
            });


            // --- SPEECH SYNTHESIS (Unchanged) ---
            let voices = [];
            let synth = window.speechSynthesis;
            
            function getMandarinVoice() {
                const preferredVoices = voices.filter(v => v.lang === 'zh-CN');
                if (preferredVoices.length > 0) return preferredVoices[0];
                const anyChineseVoice = voices.find(v => v.lang.startsWith('zh'));
                if (anyChineseVoice) return anyChineseVoice;
                return null;
            }

            function populateVoiceList() {
                if (synth) {
                    voices = synth.getVoices();
                    addSpeakButtons(); 
                } else {
                    console.warn("Speech Synthesis not supported or not initialized yet.");
                }
            }
            
             if (synth) {
                if (synth.getVoices().length > 0) {
                    populateVoiceList();
                } else {
                    synth.onvoiceschanged = populateVoiceList;
                    setTimeout(() => {
                        if (voices.length === 0) {
                            populateVoiceList(); 
                        }
                    }, 500);
                }
            } else {
                console.error("Speech Synthesis is not supported in this browser.");
                addSpeakButtons();
            }

            function speak(text, lang = 'zh-CN') {
                if (!synth) {
                    console.warn('Your browser does not support speech synthesis.');
                    return;
                }
                if (synth.speaking) synth.cancel();

                let utterance = new SpeechSynthesisUtterance(text);
                let mandarinVoice = getMandarinVoice();
                
                if (mandarinVoice) {
                    utterance.voice = mandarinVoice;
                    utterance.lang = mandarinVoice.lang; 
                } else {
                    utterance.lang = lang;
                    console.warn("No specific Mandarin voice found. Using default voice for lang=" + lang);
                }
                
                utterance.rate = 0.9;
                utterance.pitch = 1; 
                utterance.onerror = (event) => console.error('SpeechSynthesisUtterance.onerror', event);
                synth.speak(utterance);
            }

             function addSpeakButtons() {
                const elements = document.querySelectorAll('.hanzi, .speakable-pinyin');
                elements.forEach(el => {
                    if (el.dataset.hasButton === 'true') return; 
                    el.dataset.hasButton = 'true';

                    const textToSpeak = el.getAttribute('data-speak') || el.innerText;
                    if (!textToSpeak || textToSpeak.trim() === '') return;

                    const btnWrapper = document.createElement('span');
                    const btn = document.createElement('button');
                    btn.setAttribute('aria-label', `Listen to ${textToSpeak}`);
                    btn.className = 'listen-btn p-1 rounded-md transform active:scale-90 transition-transform';
                    btn.innerHTML = `<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0A9 9 0 0119 10a9 9 0 01-2.929 7.071 1 1 0 01-1.414-1.414A7 7 0 0017 10a7 7 0 00-1.757-4.95 1 1 0 010-1.121z" clip-rule="evenodd"></path></svg>`;
                    
                    if (synth) {
                        btn.onclick = (e) => {
                            e.stopPropagation(); 
                            speak(textToSpeak);
                        };
                    } else {
                        btn.disabled = true;
                        btn.style.opacity = '0.5';
                        btn.style.cursor = 'not-allowed';
                    }
                    
                    btnWrapper.appendChild(btn);

                    if (el.parentNode.classList.contains('pinyin') && el.parentNode.classList.contains('flex')) {
                        btnWrapper.className = 'listen-btn-wrapper inline-flex';
                        el.parentNode.appendChild(btnWrapper);
                    } 
                    else if (el.classList.contains('pinyin')) {
                        btnWrapper.className = 'listen-btn-wrapper inline-block ml-1 align-middle';
                        if (el.nextSibling) el.parentNode.insertBefore(btnWrapper, el.nextSibling);
                        else el.parentNode.appendChild(btnWrapper);
                    }
                    else if (el.classList.contains('hanzi')) {
                        btnWrapper.className = 'listen-btn-wrapper inline-block ml-1 align-middle';
                        if (el.nextSibling) el.parentNode.insertBefore(btnWrapper, el.nextSibling);
                        else el.parentNode.appendChild(btnWrapper);
                    }
                });
            }
            
            // --- INITIALIZATION (MOVED) ---
            // The original initialization logic is now triggered by the T&C check.

            // --- NEW: T&C Check ---
            // This is now the main entry point for the app logic
            if (localStorage.getItem('hasAcceptedTOS') === 'true') {
                tosPage.classList.add('hidden');
                initializeApp(); // Run app immediately
            } else {
                // T&C not accepted. Hide main app and wait for accept button.
                mainHeader.classList.add('hidden');
                mainContent.classList.add('hidden');
                tosPage.classList.remove('hidden'); // Ensure it's visible
                
                const givenNameInput = document.getElementById('given-name-input');
                const surnameInput = document.getElementById('surname-input');
                const givenNameError = document.getElementById('given-name-error');
                const surnameError = document.getElementById('surname-error');

                tosAcceptBtn.addEventListener('click', () => {
                    const givenName = givenNameInput.value.trim();
                    const surname = surnameInput.value.trim();
                    const hasNumber = /\d/; // Regex to check for numbers
                    let isValid = true;

                    // Reset errors
                    givenNameError.textContent = "";
                    surnameError.textContent = "";

                    // --- Validation ---
                    if (givenName.length === 0) {
                        givenNameError.textContent = "Please enter your given name.";
                        isValid = false;
                    } else if (hasNumber.test(givenName)) {
                        givenNameError.textContent = "Name cannot contain numbers.";
                        isValid = false;
                    }

                    if (surname.length === 0) {
                        surnameError.textContent = "Please enter your surname.";
                        isValid = false;
                    } else if (hasNumber.test(surname)) {
                        surnameError.textContent = "Surname cannot contain numbers.";
                        isValid = false;
                    }
                    
                    if (!isValid) {
                        return; // Stop execution
                    }

                    // Name is valid, proceed
                    localStorage.setItem('hasAcceptedTOS', 'true');
                    localStorage.setItem('userGivenName', givenName); // Save given name
                    localStorage.setItem('userSurname', surname); // Save surname
                    
                    tosPage.classList.add('hidden');
                    initializeApp();
                    // On first accept, *always* show the home page, ignoring session storage
                    showPage('home'); 
                });
            }
            // --- END NEW T&C Check ---
        });
    </script>
</body>
</html>


































